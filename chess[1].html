<!DOCTYPE html>
<html lang="en" translate="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Play chess and have fun">
    <meta name="keywords" content="chess,game,play,strategy,multiplayer games">
    <meta name="author" content="Andreas Hodo">
    <title>Chess</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0-2/css/all.min.css" integrity="sha256-46r060N2LrChLLb5zowXQ72/iKKNiw/lAmygmHExk/o=" crossorigin="anonymous"/>
</head>

<body>
<nav>
<div id="box">
 <h2>The game is not ready yet</h2>
 <h3 id="turn">White's Turn</h3>
<div id="promotion" class="promote">
  <div class="promote-content">
    <p>What do you want to promote to?</p>
    <i id="rook"class = "fas fa-chess-rook" onclick = "promote(this.id)"></i>
    <i id="knight" class = "fas fa-chess-knight" onclick = "promote(this.id)"></i>
    <i id="bishop" class = "fas fa-chess-bishop" onclick = "promote(this.id)"></i>
    <i id="queen"class = "fas fa-chess-queen" onclick = "promote(this.id)"></i>
  </div>
</div>
<div id="promotion_1" class="promote_1">
  <div class="promote-content_1">
    <p>What do you want to promote to?</p>
    <i id="rook_1"class = "fas fa-chess-rook"></i>
    <i id="knight_1" class = "fas fa-chess-knight"></i>
    <i id="bishop_1" class = "fas fa-chess-bishop"></i>
    <i id="queen_1"class = "fas fa-chess-queen"></i>
  </div>
</div>
<div id="row8"><span id="cor_8">8</span><span class = "18"id="a8"><i id="rook_1b_piece" class ="fas fa-chess-rook"></i></span>
<span class = "28" id="b8"><i  id="knight_1b_piece"  class="fas fa-chess-knight"></i></span><span class = "38"id="c8"><i id="bishop_1b_piece"class="fas fa-chess-bishop"></i></span>
<span class = "48"id="d8"><i id="queen_1b_piece"class="fas fa-chess-queen"></i></span><span class = "58"id="e8"><i  id="king_pb_piece" class="fas fa-chess-king"></i></span>
<span class = "68" id="f8"><i  id="bishop_2b_piece" class="fas fa-chess-bishop"></i></span><span class = "78"id="g8"><i id="knight_2b_piece"class="fas fa-chess-knight"></i></span>
<span class = "88" id="h8"><i  id="rook_2b_piece"class="fas fa-chess-rook"></i></span></div>  

<div id="row7"><span id="cor_7">7</span><span class = "17"id="a7"><i  id="pawn_1b_piece"  class="fas fa-chess-pawn"></i></span>
<span class = "27" id="b7"><i id="pawn_2b_piece" class="fas fa-chess-pawn"></i></span><span class = "37"id="c7"><i  id="pawn_3b_piece" class="fas fa-chess-pawn"></i></span>
<span class = "47" id="d7"><i id="pawn_4b_piece" class="fas fa-chess-pawn"></i></span><span   class = "57"id="e7"><i id="pawn_5b_piece" class="fas fa-chess-pawn"></i></span>
<span class = "67" id="f7"><i  id="pawn_6b_piece" class="fas fa-chess-pawn"></i></span><span class = "77"id="g7"><i id="pawn_7b_piece"  class="fas fa-chess-pawn"></i></span>
<span  class = "87"id="h7"><i id="pawn_8b_piece" class="fas fa-chess-pawn"></i></span></div>   

<div id="row6"><span id="cor_6">6</span><span class = "16"id="a6"></span>
<span class = "26" id="b6"></span><span class = "36"id="c6"></span>
<span class = "46"id="d6"></span><span class = "56"id="e6"></i></span>
<span class = "66"id="f6"></span><span class = "76"id="g6"></span>
<span class = "86"id="h6"></span></div>

<div id="row5"><span id="cor_5">5</span><span class = "15"id="a5"></span>
<span class = "25"id="b5"></span><span class = "35"id="c5"></span>
<span class = "45" id="d5"></span><span class = "55" id="e5"></i></span>
<span class = "65"id="f5"></span><span class = "75" id="g5"></span>
<span class = "85"id="h5"></span></div> 

<div id="row4"><span id="cor_4">4</span><span class = "14" id="a4"></span>
<span class = "24"id="b4"></span><span class = "34"id="c4"></span>
<span class = "44"id="d4"></span><span class = "54"id="e4"></i></span>
<span class = "64" id="f4"></span><span class = "74"id="g4"></span>
<span class = "84" id="h4"></span></div>

<div id="row3"><span id="cor_3">3</span><span class = "13"id="a3"></span>
<span class = "23"id="b3"></span><span class = "33"id="c3"></span>
<span class = "43" id="d3"></span><span class = "53"id="e3"></i></span>
<span class = "63"id="f3"></span><span class = "73"id="g3"></span>
<span class = "83"id="h3"></span></div>


<div id="row2"><span span id="cor_2">2</span><span class = "12"id="a2"><i id="pawn_1w_piece" class="fas fa-chess-pawn"></i></span>
<span class = "22"id="b2"><i  id="pawn_2w_piece"class="fas fa-chess-pawn"></i></span><span class = "32" id="c2"><i  id="pawn_3w_piece" class="fas fa-chess-pawn"></i></span>
<span class = "42"id="d2"><i id="pawn_4w_piece" class="fas fa-chess-pawn"></i></span><span class = "52"id="e2"><i  id="pawn_5w_piece" class="fas fa-chess-pawn"></i></span>
<span class = "62"id="f2"><i  id="pawn_6w_piece" class="fas fa-chess-pawn"></i></span><span class = "72"id="g2"><i id="pawn_7w_piece" class="fas fa-chess-pawn"></i></span>
<span class = "82"id="h2"><i id="pawn_8w_piece"class="fas fa-chess-pawn"></i></span></div>

<div id="row1"><span id="cor_1">1</span><span class = "11"id="a1"><i  id="rook_1w_piece"class="fas fa-chess-rook"></i></span>
<span class = "21"id="b1"><i  id="knight_1w_piece"class="fas fa-chess-knight"></i></span><span class = "31"id="c1"><i  id="bishop_1w_piece" class="fas fa-chess-bishop"></i></span>
<span class = "41"id="d1"><i  id="queen_1w_piece" class="fas fa-chess-queen"></i></span><span class = "51"id="e1"><i id="king_#w_piece" class="fas fa-chess-king"></i></span>
<span class = "61"id="f1"><i id="bishop_2w_piece"class="fas fa-chess-bishop"></i></span><span class = "71"id="g1"><i  id="knight_2w_piece"class="fas fa-chess-knight"></i></span>
<span class = "81"id="h1"><i id="rook_2w_piece" class="fas fa-chess-rook"></i></span></div><div id = "cor_letters"><span id="cor_a1">a</span><span id="cor_b1">b</span><span id="cor_c1">c</span><span id="cor_d1">d</span><span id="cor_e1">e</span><span id="cor_f1">f</span><span id="cor_g1">g</span><span id="cor_h1">h</span></div>
        </nav>
</div>
<script>
//Function to color the background-color of squares:#f0c996,#644b2b
var a = [0,"a","b","c","d","e","f","g","h"]  
var b = [0,1,2,3,4,5,6,7,8]  
function coloring(){
var color = "#f0c996"
for (let i = 1; i <= 8; i+= 2){
for(let j = 1; j <= 8; j++){
if (color == "#f0c996"){
    color = "#644b2b"
}else{
    color = "#f0c996"
}
      var id = a[i]+b[j];               document.getElementById(id).style.backgroundColor = color;
    }    
}

for (let i = 2; i <= 8; i+= 2){
for(let j = 1; j <= 8; j++){
      var id = a[i]+b[j];               document.getElementById(id).style.backgroundColor = color;
      if (color == "#f0c996"){
    color = "#644b2b"
}else{
    color = "#f0c996"
}
}    
}
}
coloring()

//Function to create promotion moves
var prom = [];
var  number = 3;
var white_king = false
var black_king = false
function promote(clicked_id){ 
var  elementId = clicked_id;
if (prom[1] == "w"){
var promoted_pawn = document.getElementById(prom[0]).childNodes[0].id
var destination = document.getElementById(prom[0])
destination.removeChild(destination.firstChild)
var new_pawn = document.createElement('i');  
new_pawn.style.color = "white";
new_pawn.id = elementId+"_"+number+"w"+"_piece";
new_pawn.className = "fas fa-chess-"+elementId;
if (elementId === "rook" || elementId === "knight" || elementId === "bishop" || elementId === "queen"){
var newParent = document.getElementById(prom[0]);
newParent.appendChild(new_pawn)};
document.getElementById("promotion").style.display = "none"; 
number++ 
var pieces = document.querySelectorAll('[id*="piece"]');
pieces.forEach(function(element) {
    element.addEventListener("click",moves) 
    prom = []
}) 
}else{
var promoted_pawn = document.getElementById(prom[0]).childNodes[0].id
var destination = document.getElementById(prom[0])
destination.removeChild(destination.firstChild)
var new_pawn = document.createElement('i');  
new_pawn.style.color = "black";
new_pawn.id = elementId+"_"+number+"b"+"_piece";
new_pawn.className = "fas fa-chess-"+elementId;
if (elementId === "rook" || elementId === "knight" || elementId === "bishop" || elementId === "queen"){
var newParent = document.getElementById(prom[0]);
newParent.appendChild(new_pawn)};
document.getElementById("promotion").style.display = "none"; 
number++
check()
var pieces = document.querySelectorAll('[id*="piece"]');
pieces.forEach(function(element) {
    element.addEventListener("click",moves) 
    prom = [];
})
}
}

//Function to define the illegal moves for white king
function white_illegal_moves(checking_id,move_positions){
  var is_inCheck = {
illegal_white_king_move: false,
f:[]    
}
 var white_king_square = document.getElementById(checking_id).className
var white_king_square_id = document.getElementById(checking_id).id
let turn = document.getElementById("turn").innerText
var parent = Array.from(white_king_square);
var x = parseInt(parent[0])
var y = parseInt(parent[1])
console.log("Coordinates:",x,y)      


var elements = [];
var queen = {}
var rook = {}
var bishop = {}
var knight = []
var pawn = []
var king = []
for (let i = x+1; i <= 8; i++){
let id = a[i]+b[y]   
if (a[i] && b[y]) {
elements.push(id)
}
}
elements.reverse()
queen.first = elements;
rook.first = elements;
elements = []
for (let i = x-1; i >= 1; i--){
let id = a[i]+b[y]   
if (a[i] && b[y]) {
elements.push(id)
}
}
elements.reverse()
queen.second = elements;
rook.second = elements;
elements = []
for (let i = y+1; i <= 8; i++){
let id = a[x]+b[i]   
if (a[x] && b[i]) {
elements.push(id)
}
}
elements.reverse()
queen.third = elements;
rook.third = elements;
elements = []
for (let i = y-1; i >= 1; i--){
let id = a[x]+b[i]   
if (a[x] && b[i]) {
elements.push(id)
}
}
elements.reverse()
queen.forth = elements;
rook.forth = elements;
elements = []
for (let i = x-1,j = y+1; i >= 1; i--,j++){
let id = a[i]+b[j]   
if (a[i] && b[j]) {
elements.push(id)
}
}
elements.reverse()
queen.fifth = elements;
bishop.fifth = elements;
elements = []

for (let i = x+1,j = y+1; j <= 8; i++,j++){
let id = a[i]+b[j]   
if (a[i] && b[y]) {
elements.push(id)
}
}
elements.reverse()
queen.sixth = elements;
bishop.sixth = elements;
elements = []
for (let i = x-1,j = y-1; i >= 1; i--,j--){
let id = a[i]+b[j]   
if (a[i] && b[j]){
elements.push(id)
}
}
elements.reverse()
queen.seventh = elements;
bishop.seventh = elements;
elements = []
for (let i = x+1,j = y-1; j >= 1; i++,j--){
let id = a[i]+b[j]   
if (a[i] && b[y]) {
elements.push(id)
}
}
elements.reverse()
queen.eighth = elements;
bishop.eighth = elements;
elements = []

if (turn == "White's Turn" && y !== 8){
if (x !== 8 && x !== 1){
let id_1 = a[x-1]+b[y+1]
let id_2 = a[x+1]+b[y+1] 
pawn.push(id_1,id_2)
}else if (x == 1){
let id_2 = a[x+1]+b[y+1]   
pawn.push(id_2)  
}else if (x == 8){
let id_1 = a[x-1]+b[y+1]
pawn.push(id_1)    
}
}
const cor_x = [1,-2,-1,0,1,2,1,0]
const cor_y = [2,0,-1,-2,-1,0,1,2]
  for (let i = 0; i <= 7; i++){
  x = x+cor_x[i]
  y = y+cor_y[i]
 var id = a[x]+b[y];
if (document.getElementById(id) == null){
    continue;
}
knight.push(id)
}
var x = parseInt(parent[0])
var y = parseInt(parent[1])
const cord_x = [1,-1,-1,0,0,1,1,0];
const cord_y = [1,0,0,-1,-1,0,0,1];
    for(let f = 0; f <= 8; f++){
  x = x+cord_x[f]
  y = y+cord_y[f]
      var id = a[x]+b[y]
if (document.getElementById(id) == null){
    continue;
}
king.push(id)
}
for (var key in queen) { 
  for (var i = 0; i < queen[key].length; i++) {
  if (document.getElementById(queen[key][i]).innerHTML !== ""){
      let child = document.getElementById(queen[key][i]).firstElementChild
      var piece = Array.from(child.id);
let spl = (child.id).split("_");
let type_color = Array.from(spl[1]); 
type_color.shift();
var parent = Array.from(child.parentNode.className);
let x = parseInt(parent[0])
let y = parseInt(parent[1])
piece.splice(piece.length - 8,8)
piece.pop()
let type = "";
piece.forEach(item =>{
   type = type+item;
})
if (type == "queen" && type_color == "b"){
    let found = queen[key][i];
    console.log("A black queen was found in",found)
let last = []
last.push(queen[key][queen[key].length-1])
if (last.includes(found)){
is_inCheck.illegal_white_king_move = true
}
for (var j = i+1; j < queen[key].length; j++){
       if (document.getElementById(queen[key][j]).innerHTML !== ""){
      let child = document.getElementById(queen[key][j]).firstElementChild
      var piece = Array.from(child.id);
let spl = (child.id).split("_");
let type_color = Array.from(spl[1]); 
type_color.shift();
var parent = Array.from(child.parentNode.className);
let x = parseInt(parent[0])
let y = parseInt(parent[1])
piece.splice(piece.length - 8,8)
piece.pop()
let type = "";
piece.forEach(item =>{
   type = type+item;
})
if (type !== "king" && type_color !== "w"){
           console.log("The",queen[key][j],"is not empty")
     is_inCheck.illegal_white_king_move = false;
           break;
         }
       }else{
 is_inCheck.illegal_white_king_move = true 
       }
}
}
}
}
}
is_inCheck.f.push(is_inCheck.illegal_white_king_move) 
is_inCheck.illegal_white_king_move = false; 
for (var key in rook) { 
  for (var i = 0; i < rook[key].length; i++) {
  if (document.getElementById(rook[key][i]).innerHTML !== ""){
      let child = document.getElementById(rook[key][i]).firstElementChild
      var piece = Array.from(child.id);
let spl = (child.id).split("_");
let type_color = Array.from(spl[1]); 
type_color.shift();
var parent = Array.from(child.parentNode.className);
let x = parseInt(parent[0])
let y = parseInt(parent[1])
piece.splice(piece.length - 8,8)
piece.pop()
let type = "";
piece.forEach(item =>{
   type = type+item;
})
if (type == "rook" && type_color == "b"){
    let found = rook[key][i];
    console.log("A black rook was found in",found)
let last = []
last.push(rook[key][rook[key].length-1])
if (last.includes(found)){
is_inCheck.illegal_white_king_move = true; 

}
for (var j = i+1; j < rook[key].length; j++){
       if (document.getElementById(rook[key][j]).innerHTML !== ""){
      let child = document.getElementById(queen[key][j]).firstElementChild
      var piece = Array.from(child.id);
let spl = (child.id).split("_");
let type_color = Array.from(spl[1]); 
type_color.shift();
var parent = Array.from(child.parentNode.className);
let x = parseInt(parent[0])
let y = parseInt(parent[1])
piece.splice(piece.length - 8,8)
piece.pop()
let type = "";
piece.forEach(item =>{
   type = type+item;
})
if (type !== "king" && type_color !== "w"){
           console.log("The",rook[key][j],"is not empty")
      is_inCheck.illegal_white_king_move = false;
           break;
         }
       }else{
     is_inCheck.illegal_white_king_move = true;
           
       }
}
}
}
}
}
is_inCheck.f.push(is_inCheck.illegal_white_king_move)
is_inCheck.illegal_white_king_move = false;  
for (var key in bishop) { 
  for (var i = 0; i < bishop[key].length; i++) {
  if (document.getElementById(bishop[key][i]).innerHTML !== ""){
      let child = document.getElementById(bishop[key][i]).firstElementChild
      var piece = Array.from(child.id);
let spl = (child.id).split("_");
let type_color = Array.from(spl[1]); 
type_color.shift();
var parent = Array.from(child.parentNode.className);
let x = parseInt(parent[0])
let y = parseInt(parent[1])
piece.splice(piece.length - 8,8)
piece.pop()
let type = "";
piece.forEach(item =>{
   type = type+item;
})
if (type == "bishop" && type_color == "b"){
    let found = bishop[key][i];
    console.log("A black bishop was found in",found)
let last = []
last.push(bishop[key][bishop[key].length-1])
if (last.includes(found)){
is_inCheck.illegal_white_king_move = true; 
}
for (var j = i+1; j < bishop[key].length; j++){
       if (document.getElementById(bishop[key][j]).innerHTML !== ""){
      let child = document.getElementById(queen[key][j]).firstElementChild
      var piece = Array.from(child.id);
let spl = (child.id).split("_");
let type_color = Array.from(spl[1]); 
type_color.shift();
var parent = Array.from(child.parentNode.className);
let x = parseInt(parent[0])
let y = parseInt(parent[1])
piece.splice(piece.length - 8,8)
piece.pop()
let type = "";
piece.forEach(item =>{
   type = type+item;
})
if (type !== "king" && type_color !== "w"){
           console.log("The",bishop[key][j],"is not empty")
   is_inCheck.illegal_white_king_move  = false;
           break;
         }
       }else{
 is_inCheck.illegal_white_king_move = true;
               
       }
}
}
}
}
}
is_inCheck.f.push(is_inCheck.illegal_white_king_move)
is_inCheck.illegal_white_king_move = false;
for (let i = 0; i < knight.length; i++){
  if (document.getElementById(knight[i]).innerHTML !== ""){
      let child = document.getElementById(knight[i]).firstElementChild
      var piece = Array.from(child.id);
let spl = (child.id).split("_");
let type_color = Array.from(spl[1]); 
type_color.shift();
var parent = Array.from(child.parentNode.className);
let x = parseInt(parent[0])
let y = parseInt(parent[1])
piece.splice(piece.length - 8,8)
piece.pop()
let type = "";
piece.forEach(item =>{
   type = type+item;
})
if (type == "knight" && type_color == "b"){
    let found = knight[i];
    console.log("A black knight was found in",found)
  is_inCheck.illegal_white_king_move = true;    
}
}
}
is_inCheck.f.push(is_inCheck.illegal_white_king_move)
is_inCheck.illegal_white_king_move = false;
for (let i = 0; i < pawn.length; i++){
  if (document.getElementById(pawn[i]).innerHTML !== ""){
      let child = document.getElementById(pawn[i]).firstElementChild
      var piece = Array.from(child.id);
let spl = (child.id).split("_");
let type_color = Array.from(spl[1]); 
type_color.shift();
var parent = Array.from(child.parentNode.className);
let x = parseInt(parent[0])
let y = parseInt(parent[1])
piece.splice(piece.length - 8,8)
piece.pop()
let type = "";
piece.forEach(item =>{
   type = type+item;
})
if (type == "pawn" && type_color == "b"){
    let found = pawn[i];
    console.log("A black pawn was found in",found)
 is_inCheck.illegal_white_king_move = true;
} 
}    
}
is_inCheck.f.push(is_inCheck.illegal_white_king_move)
is_inCheck.illegal_white_king_move = false;
for (let i = 0; i < king.length; i++){
  if (document.getElementById(king[i]).innerHTML !== ""){
      let child = document.getElementById(king[i]).firstElementChild
      var piece = Array.from(child.id);
let spl = (child.id).split("_");
let type_color = Array.from(spl[1]); 
type_color.shift();
var parent = Array.from(child.parentNode.className);
let x = parseInt(parent[0])
let y = parseInt(parent[1])
piece.splice(piece.length - 8,8)
piece.pop()
let type = "";
piece.forEach(item =>{
   type = type+item;
})
if (type == "king" && type_color == "b"){
    let found = king[i];
    console.log("A black king was found in",found)
 is_inCheck.illegal_white_king_move = true;
} 
}    
}
is_inCheck.f.push(is_inCheck.illegal_white_king_move)
for (let i = 0; i < is_inCheck.f.length; i++){
    if (is_inCheck.f[i]){
    is_inCheck.illegal_white_king_move = true;       
    }
}
console.log("The",checking_id,"is illegal:",is_inCheck.illegal_white_king_move)
console.log("The f array has:",is_inCheck.f) 
return is_inCheck.illegal_white_king_move
}

//Function to define the illegal moves for black king
function black_illegal_moves(checking_id){
  var is_inCheck = {
illegal_black_king_move: false,
f:[]    
}
 var black_king_square = document.getElementById(checking_id).className
var black_king_square_id = document.getElementById(checking_id).id
var white_king_square_id = document.getElementById(checking_id).id
let turn = document.getElementById("turn").innerText
var parent = Array.from(black_king_square);
var x = parseInt(parent[0])
var y = parseInt(parent[1])
console.log("Coordinates:",x,y)      


var elements = [];
var queen = {}
var rook = {}
var bishop = {}
var knight = []
var pawn = []
var king = []
for (let i = x+1; i <= 8; i++){
let id = a[i]+b[y]   
if (a[i] && b[y]) {
elements.push(id)
}
}
elements.reverse()
queen.first = elements;
rook.first = elements;
elements = []
for (let i = x-1; i >= 1; i--){
let id = a[i]+b[y]   
if (a[i] && b[y]) {
elements.push(id)
}
}
elements.reverse()
queen.second = elements;
rook.second = elements;
elements = []
for (let i = y+1; i <= 8; i++){
let id = a[x]+b[i]   
if (a[x] && b[i]) {
elements.push(id)
}
}
elements.reverse()
queen.third = elements;
rook.third = elements;
elements = []
for (let i = y-1; i >= 1; i--){
let id = a[x]+b[i]   
if (a[x] && b[i]) {
elements.push(id)
}
}
elements.reverse()
queen.forth = elements;
rook.forth = elements;
elements = []
for (let i = x-1,j = y+1; i >= 1; i--,j++){
let id = a[i]+b[j]   
if (a[i] && b[j]) {
elements.push(id)
}
}
elements.reverse()
queen.fifth = elements;
bishop.fifth = elements;
elements = []

for (let i = x+1,j = y+1; j <= 8; i++,j++){
let id = a[i]+b[j]   
if (a[i] && b[y]) {
elements.push(id)
}
}
elements.reverse()
queen.sixth = elements;
bishop.sixth = elements;
elements = []
for (let i = x-1,j = y-1; i >= 1; i--,j--){
let id = a[i]+b[j]   
if (a[i] && b[j]){
elements.push(id)
}
}
elements.reverse()
queen.seventh = elements;
bishop.seventh = elements;
elements = []
for (let i = x+1,j = y-1; j >= 1; i++,j--){
let id = a[i]+b[j]   
if (a[i] && b[y]) {
elements.push(id)
}
}
elements.reverse()
queen.eighth = elements;
bishop.eighth = elements;
elements = []

if (turn == "Black's Turn" && y !== 1){
if (x !== 8 && x !== 1){
 let id_1 = a[x-1]+b[y-1]
 let id_2 = a[x+1]+b[y-1] 
 pawn.push(id_1,id_2)
}else if (x == 8){
 let id_1 = a[x-1]+b[y-1]
   pawn.push(id_1) 
}else if (x == 1){
 let id_2 = a[x+1]+b[y-1]
   pawn.push(id_2) 
}
}
const cor_x = [1,-2,-1,0,1,2,1,0]
const cor_y = [2,0,-1,-2,-1,0,1,2]
  for (let i = 0; i <= 7; i++){
  x = x+cor_x[i]
  y = y+cor_y[i]
 var id = a[x]+b[y];
if (document.getElementById(id) == null){
    continue;
}
knight.push(id)
}
var x = parseInt(parent[0])
var y = parseInt(parent[1])
const cord_x = [1,-1,-1,0,0,1,1,0];
const cord_y = [1,0,0,-1,-1,0,0,1];
    for(let f = 0; f <= 8; f++){
  x = x+cord_x[f]
  y = y+cord_y[f]
      var id = a[x]+b[y]
if (document.getElementById(id) == null){
    continue;
}
king.push(id)
}
for (var key in queen) { 
  for (var i = 0; i < queen[key].length; i++) {
  if (document.getElementById(queen[key][i]).innerHTML !== ""){
      let child = document.getElementById(queen[key][i]).firstElementChild
      var piece = Array.from(child.id);
let spl = (child.id).split("_");
let type_color = Array.from(spl[1]); 
type_color.shift();
var parent = Array.from(child.parentNode.className);
let x = parseInt(parent[0])
let y = parseInt(parent[1])
piece.splice(piece.length - 8,8)
piece.pop()
let type = "";
piece.forEach(item =>{
   type = type+item;
})
if (type == "queen" && type_color == "w"){
    let found = queen[key][i];
    console.log("A white queen was found in",found)
let last = []
last.push(queen[key][queen[key].length-1])
if (last.includes(found)){
is_inCheck.illegal_black_king_move = true;
}
for (var j = i+1; j < queen[key].length; j++){
       if (document.getElementById(queen[key][j]).innerHTML !== ""){
      let child = document.getElementById(queen[key][j]).firstElementChild
      var piece = Array.from(child.id);
let spl = (child.id).split("_");
let type_color = Array.from(spl[1]); 
type_color.shift();
var parent = Array.from(child.parentNode.className);
let x = parseInt(parent[0])
let y = parseInt(parent[1])
piece.splice(piece.length - 8,8)
piece.pop()
let type = "";
piece.forEach(item =>{
   type = type+item;
})
if (type !== "king" && type_color !== "b"){
           console.log("The",queen[key][j],"is not empty")
    is_inCheck.illegal_black_king_move = false;
           break;
          }
       }else{
        is_inCheck.illegal_black_king_move = true;                 
       }
}
}
}
}
}
is_inCheck.f.push(is_inCheck.illegal_black_king_move)
is_inCheck.illegal_black_king_move = false;
for (var key in rook) { 
  for (var i = 0; i < rook[key].length; i++) {
  if (document.getElementById(rook[key][i]).innerHTML !== ""){
      let child = document.getElementById(rook[key][i]).firstElementChild
      var piece = Array.from(child.id);
let spl = (child.id).split("_");
let type_color = Array.from(spl[1]); 
type_color.shift();
var parent = Array.from(child.parentNode.className);
let x = parseInt(parent[0])
let y = parseInt(parent[1])
piece.splice(piece.length - 8,8)
piece.pop()
let type = "";
piece.forEach(item =>{
   type = type+item;
})
if (type == "rook" && type_color == "w"){
    let found = rook[key][i];
    console.log("A white rook was found in",found)
let last = []
last.push(rook[key][rook[key].length-1])
if (last.includes(found)){
is_inCheck.illegal_black_king_move = true; 
}
for (var j = i+1; j < rook[key].length; j++){
       if (document.getElementById(rook[key][j]).innerHTML !== ""){
      let child = document.getElementById(queen[key][j]).firstElementChild
      var piece = Array.from(child.id);
let spl = (child.id).split("_");
let type_color = Array.from(spl[1]); 
type_color.shift();
var parent = Array.from(child.parentNode.className);
let x = parseInt(parent[0])
let y = parseInt(parent[1])
piece.splice(piece.length - 8,8)
piece.pop()
let type = "";
piece.forEach(item =>{
   type = type+item;
})
if (type !== "king" && type_color !== "b"){
           console.log("The",rook[key][j],"is not empty")
     is_inCheck.illegal_black_king_move = false;
           break;
          }
       }else{
     is_inCheck.illegal_black_king_move = true;
       }
}
}
}
}
}
is_inCheck.f.push(is_inCheck.illegal_black_king_move)
is_inCheck.illegal_black_king_move = false;
for (var key in bishop) { 
  for (var i = 0; i < bishop[key].length; i++) {
  if (document.getElementById(bishop[key][i]).innerHTML !== ""){
      let child = document.getElementById(bishop[key][i]).firstElementChild
      var piece = Array.from(child.id);
let spl = (child.id).split("_");
let type_color = Array.from(spl[1]); 
type_color.shift();
var parent = Array.from(child.parentNode.className);
let x = parseInt(parent[0])
let y = parseInt(parent[1])
piece.splice(piece.length - 8,8)
piece.pop()
let type = "";
piece.forEach(item =>{
   type = type+item;
})
if (type == "bishop" && type_color == "w"){
    let found = bishop[key][i];
    console.log("A white bishop was found in",found)
let last = []
last.push(bishop[key][bishop[key].length-1])
if (last.includes(found)){
is_inCheck.illegal_black_king_move = true; 
}
for (var j = i+1; j < bishop[key].length; j++){
       if (document.getElementById(bishop[key][j]).innerHTML !== ""){
      let child = document.getElementById(queen[key][j]).firstElementChild
      var piece = Array.from(child.id);
let spl = (child.id).split("_");
let type_color = Array.from(spl[1]); 
type_color.shift();
var parent = Array.from(child.parentNode.className);
let x = parseInt(parent[0])
let y = parseInt(parent[1])
piece.splice(piece.length - 8,8)
piece.pop()
let type = "";
piece.forEach(item =>{
   type = type+item;
})
if (type !== "king" && type_color !== "b"){
           console.log("The",bishop[key][j],"is not empty")
    is_inCheck.illegal_black_king_move = false;
           break;
         }
       }else{
 is_inCheck.illegal_black_king_move = true;           
       }
}
}
}
}
}
is_inCheck.f.push(is_inCheck.illegal_black_king_move)
is_inCheck.illegal_black_king_move = false;
for (let i = 0; i < knight.length; i++){
  if (document.getElementById(knight[i]).innerHTML !== ""){
      let child = document.getElementById(knight[i]).firstElementChild
      var piece = Array.from(child.id);
let spl = (child.id).split("_");
let type_color = Array.from(spl[1]); 
type_color.shift();
var parent = Array.from(child.parentNode.className);
let x = parseInt(parent[0])
let y = parseInt(parent[1])
piece.splice(piece.length - 8,8)
piece.pop()
let type = "";
piece.forEach(item =>{
   type = type+item;
})
if (type == "knight" && type_color == "w"){
    let found = knight[i];
    console.log("A white knight was found in",found)
 is_inCheck.illegal_black_king_move = true;   
}
}
}
is_inCheck.f.push(is_inCheck.illegal_black_king_move)
is_inCheck.illegal_black_king_move = false;
for (let i = 0; i < pawn.length; i++){
  if (document.getElementById(pawn[i]).innerHTML !== ""){
      let child = document.getElementById(pawn[i]).firstElementChild
      var piece = Array.from(child.id);
let spl = (child.id).split("_");
let type_color = Array.from(spl[1]); 
type_color.shift();
var parent = Array.from(child.parentNode.className);
let x = parseInt(parent[0])
let y = parseInt(parent[1])
piece.splice(piece.length - 8,8)
piece.pop()
let type = "";
piece.forEach(item =>{
   type = type+item;
})
if (type == "pawn" && type_color == "w"){
    let found = pawn[i];
    console.log("A white pawn was found in",found)
 is_inCheck.illegal_black_king_move = true;
} 
}    
}
is_inCheck.f.push(is_inCheck.illegal_black_king_move)
is_inCheck.illegal_black_king_move = false;
for (let i = 0; i < king.length; i++){
  if (document.getElementById(king[i]).innerHTML !== ""){
      let child = document.getElementById(king[i]).firstElementChild
      var piece = Array.from(child.id);
let spl = (child.id).split("_");
let type_color = Array.from(spl[1]); 
type_color.shift();
var parent = Array.from(child.parentNode.className);
let x = parseInt(parent[0])
let y = parseInt(parent[1])
piece.splice(piece.length - 8,8)
piece.pop()
let type = "";
piece.forEach(item =>{
   type = type+item;
})
if (type == "king" && type_color == "w"){
    let found = king[i];
    console.log("A white king was found in",found)
 is_inCheck.illegal_black_king_move = true;
} 
}    
}
is_inCheck.f.push(is_inCheck.illegal_black_king_move)
for (let i = 0; i < is_inCheck.f.length; i++){
    if (is_inCheck.f[i]){
    is_inCheck.illegal_black_king_move = true;     
    }
}
console.log("The",checking_id,"is illegal:",is_inCheck.illegal_black_king_move)
console.log("The f array has:",is_inCheck.f) 
return  is_inCheck.illegal_black_king_move
}

var check_status = {
white: false,
black: false,
pieces_counter_check: 0  
}

//Function to check if  the white king  is in check after every move
function white_check(){
  var is_inCheck = {
white_king_is_inCheck: false,
f:[]    
}
 var white_king_square = document.getElementById("king_#w_piece").parentNode.className
var white_king_square_id = document.getElementById("king_#w_piece").parentNode.id
let turn = document.getElementById("turn").innerText
var parent = Array.from(white_king_square);
var x = parseInt(parent[0])
var y = parseInt(parent[1])
console.log("Coordinates:",x,y)      


var elements = [];
var queen = {}
var rook = {}
var bishop = {}
var knight = []
var pawn = []
for (let i = x+1; i <= 8; i++){
let id = a[i]+b[y]   
if (a[i] && b[y]) {
elements.push(id)
}
}
elements.reverse()
queen.first = elements;
rook.first = elements;
elements = []
for (let i = x-1; i >= 1; i--){
let id = a[i]+b[y]   
if (a[i] && b[y]) {
elements.push(id)
}
}
elements.reverse()
queen.second = elements;
rook.second = elements;
elements = []
for (let i = y+1; i <= 8; i++){
let id = a[x]+b[i]   
if (a[x] && b[i]) {
elements.push(id)
}
}
elements.reverse()
queen.third = elements;
rook.third = elements;
elements = []
for (let i = y-1; i >= 1; i--){
let id = a[x]+b[i]   
if (a[x] && b[i]) {
elements.push(id)
}
}
elements.reverse()
queen.forth = elements;
rook.forth = elements;
elements = []
for (let i = x-1,j = y+1; i >= 1; i--,j++){
let id = a[i]+b[j]   
if (a[i] && b[j]) {
elements.push(id)
}
}
elements.reverse()
queen.fifth = elements;
bishop.fifth = elements;
elements = []

for (let i = x+1,j = y+1; j <= 8; i++,j++){
let id = a[i]+b[j]   
if (a[i] && b[y]) {
elements.push(id)
}
}
elements.reverse()
queen.sixth = elements;
bishop.sixth = elements;
elements = []
for (let i = x-1,j = y-1; i >= 1; i--,j--){
let id = a[i]+b[j]   
if (a[i] && b[j]){
elements.push(id)
}
}
elements.reverse()
queen.seventh = elements;
bishop.seventh = elements;
elements = []
for (let i = x+1,j = y-1; j >= 1; i++,j--){
let id = a[i]+b[j]   
if (a[i] && b[y]) {
elements.push(id)
}
}
elements.reverse()
queen.eighth = elements;
bishop.eighth = elements;
elements = []

if (turn == "White's Turn" && y !== 8){
if (x !== 8 && x !== 1){
let id_1 = a[x-1]+b[y+1]
let id_2 = a[x+1]+b[y+1] 
pawn.push(id_1,id_2)
}else if (x == 1){
let id_2 = a[x+1]+b[y+1]   
pawn.push(id_2)  
}else if (x == 8){
let id_1 = a[x-1]+b[y+1]
pawn.push(id_1)    
}
}
const cor_x = [1,-2,-1,0,1,2,1,0]
const cor_y = [2,0,-1,-2,-1,0,1,2]
  for (let i = 0; i <= 7; i++){
  x = x+cor_x[i]
  y = y+cor_y[i]
 var id = a[x]+b[y];
if (document.getElementById(id) == null){
    continue;
}
knight.push(id)
}
for (var key in queen) { 
  for (var i = 0; i < queen[key].length; i++) {
  if (document.getElementById(queen[key][i]).innerHTML !== ""){
      let child = document.getElementById(queen[key][i]).firstElementChild
      var piece = Array.from(child.id);
let spl = (child.id).split("_");
let type_color = Array.from(spl[1]); 
type_color.shift();
var parent = Array.from(child.parentNode.className);
let x = parseInt(parent[0])
let y = parseInt(parent[1])
piece.splice(piece.length - 8,8)
piece.pop()
let type = "";
piece.forEach(item =>{
   type = type+item;
})
if (type == "queen" && type_color == "b"){
    let found = queen[key][i];
    console.log("A black queen was found in",found)
let last = []
last.push(queen[key][queen[key].length-1])
if (last.includes(found)){
is_inCheck.white_king_is_inCheck = true; 
document.getElementById(white_king_square_id).style.backgroundColor = "#ff000a" 
check_status.black_queen = last
check_status.last_move_queen = true
check_status.found_queen_square = found
}
for (var j = i+1; j < queen[key].length; j++){
       if (document.getElementById(queen[key][j]).innerHTML !== ""){
           console.log("The",queen[key][j],"is not empty")
      is_inCheck.white_king_is_inCheck = false;
           coloring()
           break;
       }else{
        is_inCheck.white_king_is_inCheck = true;        document.getElementById(white_king_square_id).style.backgroundColor = "#ff000a"
        check_status.black_queen = queen[key]
        check_status.last_move_queen = false
        check_status.found_queen_square = found   
       }
}
}
}
}
}
if (is_inCheck.white_king_is_inCheck){
    check_status.pieces_counter_check++
}
is_inCheck.f.push(is_inCheck.white_king_is_inCheck)
is_inCheck.white_king_is_inCheck = false;
for (var key in rook) { 
  for (var i = 0; i < rook[key].length; i++) {
  if (document.getElementById(rook[key][i]).innerHTML !== ""){
      let child = document.getElementById(rook[key][i]).firstElementChild
      var piece = Array.from(child.id);
let spl = (child.id).split("_");
let type_color = Array.from(spl[1]); 
type_color.shift();
var parent = Array.from(child.parentNode.className);
let x = parseInt(parent[0])
let y = parseInt(parent[1])
piece.splice(piece.length - 8,8)
piece.pop()
let type = "";
piece.forEach(item =>{
   type = type+item;
})
if (type == "rook" && type_color == "b"){
    let found = rook[key][i];
    console.log("A black rook was found in",found)
let last = []
last.push(rook[key][rook[key].length-1])
if (last.includes(found)){
is_inCheck.white_king_is_inCheck = true; 
document.getElementById(white_king_square_id).style.backgroundColor = "#ff000a" 
check_status.black_rook = last
check_status.last_move_rook = true  
check_status.found_rook_square = found
}
for (var j = i+1; j < rook[key].length; j++){
       if (document.getElementById(rook[key][j]).innerHTML !== ""){
           console.log("The",rook[key][j],"is not empty")
       is_inCheck.white_king_is_inCheck = false;
          coloring()
           break;
       }else{
         is_inCheck.white_king_is_inCheck = true;
           document.getElementById(white_king_square_id).style.backgroundColor = "#ff000a"
check_status.black_rook = rook[key]
        check_status.last_move_rook = false
        check_status.found_rook_square = found
       }
}
}
}
}
}
if (is_inCheck.white_king_is_inCheck){
    check_status.pieces_counter_check++
}
is_inCheck.f.push(is_inCheck.white_king_is_inCheck)
is_inCheck.white_king_is_inCheck = false;
for (var key in bishop) { 
  for (var i = 0; i < bishop[key].length; i++) {
  if (document.getElementById(bishop[key][i]).innerHTML !== ""){
      let child = document.getElementById(bishop[key][i]).firstElementChild
      var piece = Array.from(child.id);
let spl = (child.id).split("_");
let type_color = Array.from(spl[1]); 
type_color.shift();
var parent = Array.from(child.parentNode.className);
let x = parseInt(parent[0])
let y = parseInt(parent[1])
piece.splice(piece.length - 8,8)
piece.pop()
let type = "";
piece.forEach(item =>{
   type = type+item;
})
if (type == "bishop" && type_color == "b"){
    let found = bishop[key][i];
    console.log("A black bishop was found in",found)
let last = []
last.push(bishop[key][bishop[key].length-1])
if (last.includes(found)){
is_inCheck.white_king_is_inCheck = true; 
document.getElementById(white_king_square_id).style.backgroundColor = "#ff000a" 
check_status.black_bishop = last
check_status.last_move_bishop = true
check_status.found_bishop_square = found
}
for (var j = i+1; j < bishop[key].length; j++){
       if (document.getElementById(bishop[key][j]).innerHTML !== ""){
           console.log("The",bishop[key][j],"is not empty")
    is_inCheck.white_king_is_inCheck = false;
           coloring()
           break;
       }else{
 is_inCheck.white_king_is_inCheck = true;
           document.getElementById(white_king_square_id).style.backgroundColor = "#ff000a"
check_status.black_bishop = bishop[key]
        check_status.last_move_bishop = false
       check_status.found_bishop_square = found    
       }
}
}
}
}
}
if (is_inCheck.white_king_is_inCheck){
    check_status.pieces_counter_check++
}
is_inCheck.f.push(is_inCheck.white_king_is_inCheck)
is_inCheck.white_king_is_inCheck = false;
for (let i = 0; i < knight.length; i++){
  if (document.getElementById(knight[i]).innerHTML !== ""){
      let child = document.getElementById(knight[i]).firstElementChild
      var piece = Array.from(child.id);
let spl = (child.id).split("_");
let type_color = Array.from(spl[1]); 
type_color.shift();
var parent = Array.from(child.parentNode.className);
let x = parseInt(parent[0])
let y = parseInt(parent[1])
piece.splice(piece.length - 8,8)
piece.pop()
let type = "";
piece.forEach(item =>{
   type = type+item;
})
if (type == "knight" && type_color == "b"){
    let found = knight[i];
    console.log("A black knight was found in",found)
  is_inCheck.white_king_is_inCheck = true;    document.getElementById(white_king_square_id).style.backgroundColor = "#ff000a"
check_status.black_knight = knight[i]
check_status.last_move_knight = false
check_status.found_knight_square = found
}
}
}
if (is_inCheck.white_king_is_inCheck){
    check_status.pieces_counter_check++
}
is_inCheck.f.push(is_inCheck.white_king_is_inCheck)
is_inCheck.white_king_is_inCheck = false;
for (let i = 0; i < pawn.length; i++){
  if (document.getElementById(pawn[i]).innerHTML !== ""){
      let child = document.getElementById(pawn[i]).firstElementChild
      var piece = Array.from(child.id);
let spl = (child.id).split("_");
let type_color = Array.from(spl[1]); 
type_color.shift();
var parent = Array.from(child.parentNode.className);
let x = parseInt(parent[0])
let y = parseInt(parent[1])
piece.splice(piece.length - 8,8)
piece.pop()
let type = "";
piece.forEach(item =>{
   type = type+item;
})
if (type == "pawn" && type_color == "b"){
    let found = pawn[i];
    console.log("A black pawn was found in",found)
 is_inCheck.white_king_is_inCheck = true;
    document.getElementById(white_king_square_id).style.backgroundColor = "#ff000a"
check_status.black_pawn = pawn[i]
check_status.last_move_pawn = false
check_status.found_pawn_square = found
} 
}    
}
if (is_inCheck.white_king_is_inCheck){
    check_status.pieces_counter_check++
}
is_inCheck.f.push(is_inCheck.white_king_is_inCheck)
for (let i = 0; i < is_inCheck.f.length; i++){
    if (is_inCheck.f[i]){
    is_inCheck.white_king_is_inCheck = true;       document.getElementById(white_king_square_id).style.backgroundColor = "#ff000a"
    }
}
console.log("The white king is in check:",is_inCheck.white_king_is_inCheck)
console.log("The f array has:",is_inCheck.f)  
check_status.white = is_inCheck.white_king_is_inCheck
}

//Function to check if  the black king  is in check after every move
function black_check(){
  var is_inCheck = {
black_king_is_inCheck: false,
f:[]    
}
 var black_king_square = document.getElementById("king_pb_piece").parentNode.className
var black_king_square_id = document.getElementById("king_pb_piece").parentNode.id
var white_king_square_id = document.getElementById("king_#w_piece").parentNode.id
let turn = document.getElementById("turn").innerText
var parent = Array.from(black_king_square);
var x = parseInt(parent[0])
var y = parseInt(parent[1])
console.log("Coordinates:",x,y)      


var elements = [];
var queen = {}
var rook = {}
var bishop = {}
var knight = []
var pawn = []
for (let i = x+1; i <= 8; i++){
let id = a[i]+b[y]   
if (a[i] && b[y]) {
elements.push(id)
}
}
elements.reverse()
queen.first = elements;
rook.first = elements;
elements = []
for (let i = x-1; i >= 1; i--){
let id = a[i]+b[y]   
if (a[i] && b[y]) {
elements.push(id)
}
}
elements.reverse()
queen.second = elements;
rook.second = elements;
elements = []
for (let i = y+1; i <= 8; i++){
let id = a[x]+b[i]   
if (a[x] && b[i]) {
elements.push(id)
}
}
elements.reverse()
queen.third = elements;
rook.third = elements;
elements = []
for (let i = y-1; i >= 1; i--){
let id = a[x]+b[i]   
if (a[x] && b[i]) {
elements.push(id)
}
}
elements.reverse()
queen.forth = elements;
rook.forth = elements;
elements = []
for (let i = x-1,j = y+1; i >= 1; i--,j++){
let id = a[i]+b[j]   
if (a[i] && b[j]) {
elements.push(id)
}
}
elements.reverse()
queen.fifth = elements;
bishop.fifth = elements;
elements = []

for (let i = x+1,j = y+1; j <= 8; i++,j++){
let id = a[i]+b[j]   
if (a[i] && b[y]) {
elements.push(id)
}
}
elements.reverse()
queen.sixth = elements;
bishop.sixth = elements;
elements = []
for (let i = x-1,j = y-1; i >= 1; i--,j--){
let id = a[i]+b[j]   
if (a[i] && b[j]){
elements.push(id)
}
}
elements.reverse()
queen.seventh = elements;
bishop.seventh = elements;
elements = []
for (let i = x+1,j = y-1; j >= 1; i++,j--){
let id = a[i]+b[j]   
if (a[i] && b[y]) {
elements.push(id)
}
}
elements.reverse()
queen.eighth = elements;
bishop.eighth = elements;
elements = []

if (turn == "Black's Turn" && y !== 1){
if (x !== 8 && x !== 1){
 let id_1 = a[x-1]+b[y-1]
 let id_2 = a[x+1]+b[y-1] 
 pawn.push(id_1,id_2)
}else if (x == 8){
 let id_1 = a[x-1]+b[y-1]
   pawn.push(id_1) 
}else if (x == 1){
 let id_2 = a[x+1]+b[y-1]
   pawn.push(id_2) 
}
}
const cor_x = [1,-2,-1,0,1,2,1,0]
const cor_y = [2,0,-1,-2,-1,0,1,2]
  for (let i = 0; i <= 7; i++){
  x = x+cor_x[i]
  y = y+cor_y[i]
 var id = a[x]+b[y];
if (document.getElementById(id) == null){
    continue;
}
knight.push(id)
}
for (var key in queen) { 
  for (var i = 0; i < queen[key].length; i++) {
  if (document.getElementById(queen[key][i]).innerHTML !== ""){
      let child = document.getElementById(queen[key][i]).firstElementChild
      var piece = Array.from(child.id);
let spl = (child.id).split("_");
let type_color = Array.from(spl[1]); 
type_color.shift();
var parent = Array.from(child.parentNode.className);
let x = parseInt(parent[0])
let y = parseInt(parent[1])
piece.splice(piece.length - 8,8)
piece.pop()
let type = "";
piece.forEach(item =>{
   type = type+item;
})
if (type == "queen" && type_color == "w"){
    let found = queen[key][i];
    console.log("A white queen was found in",found)
let last = []
last.push(queen[key][queen[key].length-1])
if (last.includes(found)){
is_inCheck.black_king_is_inCheck = true; 
document.getElementById(black_king_square_id).style.backgroundColor = "#ff000a"
check_status.white_queen = last
check_status.last_move_queen = true 
check_status.found_queen_square = found
}
for (var j = i+1; j < queen[key].length; j++){
       if (document.getElementById(queen[key][j]).innerHTML !== ""){
           console.log("The",queen[key][j],"is not empty")
      is_inCheck.black_king_is_inCheck = false;
           coloring()
           break;
       }else{
        is_inCheck.black_king_is_inCheck = true;        document.getElementById(black_king_square_id).style.backgroundColor = "#ff000a"
check_status.white_queen = queen[key]
        check_status.last_move_queen = false 
        check_status.found_queen_square = found          
       }
}
}
}
}
}
if (is_inCheck.black_king_is_inCheck){
    check_status.pieces_counter_check++
}
is_inCheck.f.push(is_inCheck.black_king_is_inCheck)
is_inCheck.black_king_is_inCheck = false;
for (var key in rook) { 
  for (var i = 0; i < rook[key].length; i++) {
  if (document.getElementById(rook[key][i]).innerHTML !== ""){
      let child = document.getElementById(rook[key][i]).firstElementChild
      var piece = Array.from(child.id);
let spl = (child.id).split("_");
let type_color = Array.from(spl[1]); 
type_color.shift();
var parent = Array.from(child.parentNode.className);
let x = parseInt(parent[0])
let y = parseInt(parent[1])
piece.splice(piece.length - 8,8)
piece.pop()
let type = "";
piece.forEach(item =>{
   type = type+item;
})
if (type == "rook" && type_color == "w"){
    let found = rook[key][i];
    console.log("A white rook was found in",found)
let last = []
last.push(rook[key][rook[key].length-1])
if (last.includes(found)){
is_inCheck.black_king_is_inCheck = true; 
document.getElementById(black_king_square_id).style.backgroundColor = "#ff000a" 
check_status.white_rook = last
check_status.last_move_rook = true 
check_status.found_rook_square = found 
}
for (var j = i+1; j < rook[key].length; j++){
       if (document.getElementById(rook[key][j]).innerHTML !== ""){
           console.log("The",rook[key][j],"is not empty")
       is_inCheck.black_king_is_inCheck = false;
          coloring()
           break;
       }else{
         is_inCheck.black_king_is_inCheck = true;
           document.getElementById(black_king_square_id).style.backgroundColor = "#ff000a"
check_status.white_rook = rook[key]
        check_status.last_move_rook = false 
        check_status.found_rook_square = found
       }
}
}
}
}
}
if (is_inCheck.black_king_is_inCheck){
    check_status.pieces_counter_check++
}
is_inCheck.f.push(is_inCheck.black_king_is_inCheck)
is_inCheck.black_king_is_inCheck = false;
for (var key in bishop) { 
  for (var i = 0; i < bishop[key].length; i++) {
  if (document.getElementById(bishop[key][i]).innerHTML !== ""){
      let child = document.getElementById(bishop[key][i]).firstElementChild
      var piece = Array.from(child.id);
let spl = (child.id).split("_");
let type_color = Array.from(spl[1]); 
type_color.shift();
var parent = Array.from(child.parentNode.className);
let x = parseInt(parent[0])
let y = parseInt(parent[1])
piece.splice(piece.length - 8,8)
piece.pop()
let type = "";
piece.forEach(item =>{
   type = type+item;
})
if (type == "bishop" && type_color == "w"){
    let found = bishop[key][i];
    console.log("A white bishop was found in",found)
let last = []
last.push(bishop[key][bishop[key].length-1])
if (last.includes(found)){
is_inCheck.black_king_is_inCheck = true; 
document.getElementById(black_king_square_id).style.backgroundColor = "#ff000a" 
check_status.white_bishop = last
check_status.last_move_bishop = true
check_status.found_bishop_square = found
}
for (var j = i+1; j < bishop[key].length; j++){
       if (document.getElementById(bishop[key][j]).innerHTML !== ""){
           console.log("The",bishop[key][j],"is not empty")
    is_inCheck.black_king_is_inCheck = false;
           coloring()
           break;
       }else{
 is_inCheck.black_king_is_inCheck = true;
           document.getElementById(black_king_square_id).style.backgroundColor = "#ff000a"
check_status.white_bishop = bishop[key]
        check_status.last_move_bishop = false 
        check_status.found_bishop_square = found           
       }
}
}
}
}
}
if (is_inCheck.black_king_is_inCheck){
    check_status.pieces_counter_check++
}
is_inCheck.f.push(is_inCheck.black_king_is_inCheck)
is_inCheck.black_king_is_inCheck = false;
for (let i = 0; i < knight.length; i++){
  if (document.getElementById(knight[i]).innerHTML !== ""){
      let child = document.getElementById(knight[i]).firstElementChild
      var piece = Array.from(child.id);
let spl = (child.id).split("_");
let type_color = Array.from(spl[1]); 
type_color.shift();
var parent = Array.from(child.parentNode.className);
let x = parseInt(parent[0])
let y = parseInt(parent[1])
piece.splice(piece.length - 8,8)
piece.pop()
let type = "";
piece.forEach(item =>{
   type = type+item;
})
if (type == "knight" && type_color == "w"){
    let found = knight[i];
    console.log("A white knight was found in",found)
  is_inCheck.black_king_is_inCheck = true;    document.getElementById(black_king_square_id).style.backgroundColor = "#ff000a"
check_status.white_knight = knight[i]
check_status.last_move_knight = false 
check_status.found_knight_square = found
}
}
}
if (is_inCheck.black_king_is_inCheck){
    check_status.pieces_counter_check++
}
is_inCheck.f.push(is_inCheck.black_king_is_inCheck)
is_inCheck.black_king_is_inCheck = false;
for (let i = 0; i < pawn.length; i++){
  if (document.getElementById(pawn[i]).innerHTML !== ""){
      let child = document.getElementById(pawn[i]).firstElementChild
      var piece = Array.from(child.id);
let spl = (child.id).split("_");
let type_color = Array.from(spl[1]); 
type_color.shift();
var parent = Array.from(child.parentNode.className);
let x = parseInt(parent[0])
let y = parseInt(parent[1])
piece.splice(piece.length - 8,8)
piece.pop()
let type = "";
piece.forEach(item =>{
   type = type+item;
})
if (type == "pawn" && type_color == "w"){
    let found = pawn[i];
    console.log("A white pawn was found in",found)
 is_inCheck.black_king_is_inCheck = true;
    document.getElementById(black_king_square_id).style.backgroundColor = "#ff000a"
check_status.white_pawn = pawn[key]
check_status.last_move_pawn = false
check_status.found_pawn_square = found 
} 
}    
}
if (is_inCheck.black_king_is_inCheck){
    check_status.pieces_counter_check++
}
is_inCheck.f.push(is_inCheck.black_king_is_inCheck)
for (let i = 0; i < is_inCheck.f.length; i++){
    if (is_inCheck.f[i]){
    is_inCheck.black_king_is_inCheck = true;       document.getElementById(black_king_square_id).style.backgroundColor = "#ff000a"
    }
}

console.log("The black king is in check:",is_inCheck.black_king_is_inCheck)
console.log("The f array has:",is_inCheck.f) 
check_status.black = is_inCheck.black_king_is_inCheck 

if (check_status.white){   
document.getElementById(white_king_square_id).style.backgroundColor = "#ff000a"
}
if (check_status.black){   
document.getElementById(black_king_square_id).style.backgroundColor = "#ff000a"
}
}

//Function to create the moves for each chess piece 
var pieces = document.querySelectorAll('[id*="piece"]');
pieces.forEach(function(element) {
    element.addEventListener("click",moves) 
})
var multiple_choices = 0;
var enpassant_x_w = 0;
var enpassant_y_w = 0;
var enpassant_x_b = 0;
var enpassant_y_b = 0;
var enpassant_counter = 0;
var enpassant_counter_1 = 0;
var ep = false;
var ep_1 = false;
var rook_1w = 0;
var rook_2w = 0;
var king_w = 0;
var rook_1b = 0;
var rook_2b = 0;
var king_b = 0;
var controller = new AbortController();
var signal = controller.signal;
function moves(e){
multiple_choices++;
var move_positions = [];
var piece = Array.from(e.target.id);
var spl = (e.target.id).split("_");
var type_color = Array.from(spl[1]); 
type_color.shift();
console.log("Color:",type_color);
var parent = Array.from(e.target.parentNode.className);
var x = parseInt(parent[0])
var y = parseInt(parent[1])
console.log("Coordinates:",x,y)
piece.splice(piece.length - 8,8)
piece.pop()
var type = "";
piece.forEach(item =>{
   type = type+item;
})
console.log("Type:",type)
var starting_pos = a[x]+b[y];
console.log("Starting position:",starting_pos)
if (multiple_choices == 2 && document.getElementById(e.target.parentNode.id).style.backgroundColor == "rgb(255, 241, 0)"){
 return;
}else if(document.getElementById("turn").innerText == "White's Turn" && type_color == "b"){
multiple_choices = 0;
controller.abort();
coloring();
if (check_status.white){ 
var white_king_square_id = document.getElementById("king_#w_piece").parentNode.id  
document.getElementById(white_king_square_id).style.backgroundColor = "#ff000a"
}
if (check_status.black){  
var black_king_square_id = document.getElementById("king_pb_piece").parentNode.id
document.getElementById(black_king_square_id).style.backgroundColor = "#ff000a"
}
controller = new AbortController();
signal = controller.signal;
return;
}else if (document.getElementById("turn").innerText == "Black's Turn" && type_color == "w"){
multiple_choices = 0;
controller.abort();
coloring();
if (check_status.white){ 
var white_king_square_id = document.getElementById("king_#w_piece").parentNode.id  
document.getElementById(white_king_square_id).style.backgroundColor = "#ff000a"
}
if (check_status.black){  
var black_king_square_id = document.getElementById("king_pb_piece").parentNode.id
document.getElementById(black_king_square_id).style.backgroundColor = "#ff000a"
}
controller = new AbortController();
signal = controller.signal;
return;
}
if (type == "rook"){
    for (let i = y; i <= 8; i++){
       var id = a[x]+b[i];  
if(document.getElementById(id)===document.getElementById(starting_pos)){
       continue 
}else if (document.getElementById(id).innerHTML!==""){ 
var parent = document.getElementById(id). children[0].id
var parent_1 = document.getElementById(id). children[0].parentNode.id
var spl_par = parent.split("_");
var type_color_move = Array.from(spl_par[1]); 
type_color_move.shift();
if(type_color_move =="w" && type_color == "w"){
document.getElementById(id).style.backgroundColor="#0003ff";
break;   
}else if(type_color_move == "b" && type_color == "w"){
document.getElementById(id).style.backgroundColor="#fff100";
move_positions.push(id);
break;  
}  else if(type_color_move =="w" && type_color == "w"){
document.getElementById(id).style.backgroundColor="#0003ff";
break;   
}else if(type_color_move == "b" && type_color == "b"){
document.getElementById(id).style.backgroundColor="#0003ff";
break;    
}else if(type_color_move == "w" && type_color == "b"){
document.getElementById(id).style.backgroundColor="#fff100";
move_positions.push(id);
break;    
}
}
       move_positions.push(id);      document.getElementById(id).style.backgroundColor ="#1e5e00";
    } 
    for (let i = x; i >= 1; i--){
if(document.getElementById(id)===document.getElementById(starting_pos)){
       continue 
}else if (document.getElementById(id).innerHTML!==""){ 
var parent = document.getElementById(id). children[0].id
var parent_1 = document.getElementById(id). children[0].parentNode.id
var spl_par = parent.split("_");
var type_color_move = Array.from(spl_par[1]); 
type_color_move.shift();
if(type_color_move =="w" && type_color == "w"){
document.getElementById(id).style.backgroundColor="#0003ff";
break;   
}else if(type_color_move == "b" && type_color == "w"){
document.getElementById(id).style.backgroundColor="#fff100";
move_positions.push(id);
break;  
}  else if(type_color_move =="w" && type_color == "w"){
document.getElementById(id).style.backgroundColor="#0003ff";
break;   
}else if(type_color_move == "b" && type_color == "b"){
document.getElementById(id).style.backgroundColor="#0003ff";
break;    
}else if(type_color_move == "w" && type_color == "b"){
document.getElementById(id).style.backgroundColor="#fff100";
move_positions.push(id);
break;    
}
} 
       move_positions.push(id);     document.getElementById(id).style.backgroundColor ="#1e5e00";
    }  
 for (let i = x; i <= 8; i++){
       var id = a[i]+b[y]; 
if(document.getElementById(id)===document.getElementById(starting_pos)){
       continue 
}else if (document.getElementById(id).innerHTML!==""){ 
var parent = document.getElementById(id). children[0].id
var parent_1 = document.getElementById(id). children[0].parentNode.id
var spl_par = parent.split("_");
var type_color_move = Array.from(spl_par[1]); 
type_color_move.shift();
if(type_color_move =="w" && type_color == "w"){
document.getElementById(id).style.backgroundColor="#0003ff";
break;   
}else if(type_color_move == "b" && type_color == "w"){
document.getElementById(id).style.backgroundColor="#fff100";
move_positions.push(id);
break;  
}  else if(type_color_move =="w" && type_color == "w"){
document.getElementById(id).style.backgroundColor="#0003ff";
break;   
}else if(type_color_move == "b" && type_color == "b"){
document.getElementById(id).style.backgroundColor="#0003ff";
break;    
}else if(type_color_move == "w" && type_color == "b"){
document.getElementById(id).style.backgroundColor="#fff100";
move_positions.push(id);
break;    
}
}
       move_positions.push(id);      document.getElementById(id).style.backgroundColor ="#1e5e00";
    } 
    for (let i = x; i >= 1; i--){
if(document.getElementById(id)===document.getElementById(starting_pos)){
       continue 
}else if (document.getElementById(id).innerHTML!==""){ 
var parent = document.getElementById(id). children[0].id
var parent_1 = document.getElementById(id). children[0].parentNode.id
var spl_par = parent.split("_");
var type_color_move = Array.from(spl_par[1]); 
type_color_move.shift();
if(type_color_move =="w" && type_color == "w"){
document.getElementById(id).style.backgroundColor="#0003ff";
break;   
}else if(type_color_move == "b" && type_color == "w"){
document.getElementById(id).style.backgroundColor="#fff100";
move_positions.push(id);
break;  
}  else if(type_color_move =="w" && type_color == "w"){
document.getElementById(id).style.backgroundColor="#0003ff";
break;   
}else if(type_color_move == "b" && type_color == "b"){
document.getElementById(id).style.backgroundColor="#0003ff";
break;    
}else if(type_color_move == "w" && type_color == "b"){
document.getElementById(id).style.backgroundColor="#fff100";
move_positions.push(id);
break;    
}
}  
       move_positions.push(id);     document.getElementById(id).style.backgroundColor ="#1e5e00";
    }  
for (let i = x; i >= 1; i--){
       var id = a[i]+b[y];  
if(document.getElementById(id)===document.getElementById(starting_pos)){
       continue 
}else if (document.getElementById(id).innerHTML!==""){ 
var parent = document.getElementById(id). children[0].id
var parent_1 = document.getElementById(id). children[0].parentNode.id
var spl_par = parent.split("_");
var type_color_move = Array.from(spl_par[1]); 
type_color_move.shift();
if(type_color_move =="w" && type_color == "w"){
document.getElementById(id).style.backgroundColor="#0003ff";
break;   
}else if(type_color_move == "b" && type_color == "w"){
document.getElementById(id).style.backgroundColor="#fff100";
move_positions.push(id);
break;  
}  else if(type_color_move =="w" && type_color == "w"){
document.getElementById(id).style.backgroundColor="#0003ff";
break;   
}else if(type_color_move == "b" && type_color == "b"){
document.getElementById(id).style.backgroundColor="#0003ff";
break;    
}else if(type_color_move == "w" && type_color == "b"){
document.getElementById(id).style.backgroundColor="#fff100";
move_positions.push(id);
break;    
}
}
       move_positions.push(id);      document.getElementById(id).style.backgroundColor ="#1e5e00";
    } 
    for (let i = x; i >= 1; i--){
if(document.getElementById(id)===document.getElementById(starting_pos)){
       continue 
}else if (document.getElementById(id).innerHTML!==""){ 
var parent = document.getElementById(id). children[0].id
var parent_1 = document.getElementById(id). children[0].parentNode.id
var spl_par = parent.split("_");
var type_color_move = Array.from(spl_par[1]); 
type_color_move.shift();
if(type_color_move =="w" && type_color == "w"){
document.getElementById(id).style.backgroundColor="#0003ff";
break;   
}else if(type_color_move == "b" && type_color == "w"){
document.getElementById(id).style.backgroundColor="#fff100";
move_positions.push(id);
break;  
}  else if(type_color_move =="w" && type_color == "w"){
document.getElementById(id).style.backgroundColor="#0003ff";
break;   
}else if(type_color_move == "b" && type_color == "b"){
document.getElementById(id).style.backgroundColor="#0003ff";
break;    
}else if(type_color_move == "w" && type_color == "b"){
document.getElementById(id).style.backgroundColor="#fff100";
move_positions.push(id);
break;    
}
} 
       move_positions.push(id);     document.getElementById(id).style.backgroundColor ="#1e5e00";
    }  

    for (let i = y; i >= 1; i--){
       var id = a[x]+b[i];
if(document.getElementById(id)===document.getElementById(starting_pos)){
       continue 
}else if (document.getElementById(id).innerHTML!==""){ 
var parent = document.getElementById(id). children[0].id
var parent_1 = document.getElementById(id). children[0].parentNode.id
var spl_par = parent.split("_");
var type_color_move = Array.from(spl_par[1]); 
type_color_move.shift();
if(type_color_move =="w" && type_color == "w"){
document.getElementById(id).style.backgroundColor="#0003ff";
break;   
}else if(type_color_move == "b" && type_color == "w"){
document.getElementById(id).style.backgroundColor="#fff100";
move_positions.push(id);
break;  
}  else if(type_color_move =="w" && type_color == "w"){
document.getElementById(id).style.backgroundColor="#0003ff";
break;   
}else if(type_color_move == "b" && type_color == "b"){
document.getElementById(id).style.backgroundColor="#0003ff";
break;    
}else if(type_color_move == "w" && type_color == "b"){
document.getElementById(id).style.backgroundColor="#fff100";
move_positions.push(id);
break;    
}
}
       move_positions.push(id);      document.getElementById(id).style.backgroundColor ="#1e5e00";
    } 
    for (let i = x; i >= 1; i--){
if(document.getElementById(id)===document.getElementById(starting_pos)){
       continue 
}else if (document.getElementById(id).innerHTML!==""){ 
var parent = document.getElementById(id). children[0].id
var parent_1 = document.getElementById(id). children[0].parentNode.id
var spl_par = parent.split("_");
var type_color_move = Array.from(spl_par[1]); 
type_color_move.shift();
if(type_color_move =="w" && type_color == "w"){
document.getElementById(id).style.backgroundColor="#0003ff";
break;   
}else if(type_color_move == "b" && type_color == "w"){
document.getElementById(id).style.backgroundColor="#fff100";
move_positions.push(id);
break;  
}  else if(type_color_move =="w" && type_color == "w"){
document.getElementById(id).style.backgroundColor="#0003ff";
break;   
}else if(type_color_move == "b" && type_color == "b"){
document.getElementById(id).style.backgroundColor="#0003ff";
break;    
}else if(type_color_move == "w" && type_color == "b"){
document.getElementById(id).style.backgroundColor="#fff100";
move_positions.push(id);
break;    
}
}
       move_positions.push(id);     document.getElementById(id).style.backgroundColor ="#1e5e00";
    }   
}else if(type == "knight"){
const cor_x = [1,-2,-1,0,1,2,1,0]
const cor_y = [2,0,-1,-2,-1,0,1,2]
  for (let i = 0; i <= 7; i++){
  x = x+cor_x[i]
  y = y+cor_y[i]
 var id = a[x]+b[y];
if (document.getElementById(id) == null){
    continue;
}
move_positions.push(id);            document.getElementById(id).style.backgroundColor ="#1e5e00";
if (document.getElementById(id).innerHTML!==""){
var parent = document.getElementById(id). children[0].id
var spl_par = parent.split("_");
var type_color_move = Array.from(spl_par[1]); 
type_color_move.shift();
if (type_color_move == "w" && type_color == "w"){
document.getElementById(id).style.backgroundColor="#0003ff";
var index = move_positions.indexOf(id)
move_positions.splice(index,1)
}else if(type_color_move == "b" && type_color == "w"){
document.getElementById(id).style.backgroundColor="#fff100";    
}else if(type_color_move == "b" && type_color == "b"){
document.getElementById(id).style.backgroundColor="#0003ff"; 
var index = move_positions.indexOf(id)
move_positions.splice(index,1)  
}else if(type_color_move == "w" && type_color == "b"){
document.getElementById(id).style.backgroundColor="#fff100";   
}
}
}  
}else if(type == "bishop"){
var n = y;
var m = x;  
var r = y;
var k = x;
var w = y;
var h = x;
 while(x <= 8){
     var id = a[x]+b[y];

if (document.getElementById(id) == null){
    break;
}    document.getElementById(id).style.backgroundColor ="#1e5e00";

if(document.getElementById(id)===document.getElementById(starting_pos)){
}else if (document.getElementById(id).innerHTML !==""){ 
var parent = document.getElementById(id). children[0].id
var parent_1 = document.getElementById(id). children[0].parentNode.id
var spl_par = parent.split("_");
var type_color_move = Array.from(spl_par[1]); 
type_color_move.shift();
if(type_color_move == "w" && type_color == "w"){
document.getElementById(id).style.backgroundColor="#0003ff";  
break;
}else if(type_color_move == "b" && type_color == "w"){
document.getElementById(id).style.backgroundColor="#fff100"; 
move_positions.push(id);
break;   
}else if(type_color_move == "b" && type_color == "b"){
document.getElementById(id).style.backgroundColor="#0003ff"; 
break;   
}else if(type_color_move == "w" && type_color == "b"){
document.getElementById(id).style.backgroundColor="#fff100"; 
move_positions.push(id);
break;   
}
}
move_positions.push(id);
     x++;
     y++;
 }
 while(m >= 1){
     var id = a[m]+b[n]
if (document.getElementById(id) == null){
    break;
}
       
 document.getElementById(id).style.backgroundColor ="#1e5e00";
 if(document.getElementById(id)===document.getElementById(starting_pos)){
}else if (document.getElementById(id).innerHTML !==""){ 
var parent = document.getElementById(id). children[0].id
var parent_1 = document.getElementById(id). children[0].parentNode.id
var spl_par = parent.split("_");
var type_color_move = Array.from(spl_par[1]); 
type_color_move.shift();
if(type_color_move == "w" && type_color == "w"){
document.getElementById(id).style.backgroundColor="#0003ff";  
break;
}else if(type_color_move == "b" && type_color == "w"){
document.getElementById(id).style.backgroundColor="#fff100"; 
move_positions.push(id);
break;   
}else if(type_color_move == "b" && type_color == "b"){
document.getElementById(id).style.backgroundColor="#0003ff"; 
break;   
}else if(type_color_move == "w" && type_color == "b"){
document.getElementById(id).style.backgroundColor="#fff100"; 
move_positions.push(id);
break;   
}
}
move_positions.push(id);
     m--;
     n++;
 }
while(k >= 1){
     var id = a[k]+b[r]
if (document.getElementById(id) == null){
    break;
}
       
 document.getElementById(id).style.backgroundColor ="#1e5e00";
if(document.getElementById(id)===document.getElementById(starting_pos)){
}else if (document.getElementById(id).innerHTML !==""){ 
var parent = document.getElementById(id). children[0].id
var parent_1 = document.getElementById(id). children[0].parentNode.id
var spl_par = parent.split("_");
var type_color_move = Array.from(spl_par[1]); 
type_color_move.shift();
if(type_color_move == "w" && type_color == "w"){
document.getElementById(id).style.backgroundColor="#0003ff";  
break;
}else if(type_color_move == "b" && type_color == "w"){
document.getElementById(id).style.backgroundColor="#fff100"; 
move_positions.push(id);
break;   
}else if(type_color_move == "b" && type_color == "b"){
document.getElementById(id).style.backgroundColor="#0003ff"; 
break;   
}else if(type_color_move == "w" && type_color == "b"){
document.getElementById(id).style.backgroundColor="#fff100"; 
move_positions.push(id);
break;   
}
}
move_positions.push(id);
     k--;
     r--;
}
while(h <= 8){
     var id = a[h]+b[w]
if (document.getElementById(id) == null){
    break;
}
      
 document.getElementById(id).style.backgroundColor ="#1e5e00";
if(document.getElementById(id)===document.getElementById(starting_pos)){
}else if (document.getElementById(id).innerHTML !==""){ 
var parent = document.getElementById(id). children[0].id
var parent_1 = document.getElementById(id). children[0].parentNode.id
var spl_par = parent.split("_");
var type_color_move = Array.from(spl_par[1]); 
type_color_move.shift();
if(type_color_move == "w" && type_color == "w"){
document.getElementById(id).style.backgroundColor="#0003ff";  
break;
}else if(type_color_move == "b" && type_color == "w"){
document.getElementById(id).style.backgroundColor="#fff100"; 
move_positions.push(id); 
break;   
}else if(type_color_move == "b" && type_color == "b"){
document.getElementById(id).style.backgroundColor="#0003ff"; 
break;   
}else if(type_color_move == "w" && type_color == "b"){
document.getElementById(id).style.backgroundColor="#fff100"; 
move_positions.push(id); 
break;   
}
}
move_positions.push(id); 
     h++;
     w--;
}
}else if(type == "queen"){
var n = y;
var m = x;  
var r = y;
var k = x;
var w = y;
var h = x;
    for (let i = y; i <= 8; i++){
       var id = a[x]+b[i]; 
if(document.getElementById(id)===document.getElementById(starting_pos)){
       continue 
}else if (document.getElementById(id).innerHTML!==""){ 
var parent = document.getElementById(id). children[0].id
var parent_1 = document.getElementById(id). children[0].parentNode.id
var spl_par = parent.split("_");
var type_color_move = Array.from(spl_par[1]); 
type_color_move.shift();
if(type_color_move =="w" && type_color == "w"){
document.getElementById(id).style.backgroundColor="#0003ff";
break;   
}else if(type_color_move == "b" && type_color == "w"){
document.getElementById(id).style.backgroundColor="#fff100";
move_positions.push(id);
break;  
}  else if(type_color_move =="w" && type_color == "w"){
document.getElementById(id).style.backgroundColor="#0003ff";
break;   
}else if(type_color_move == "b" && type_color == "b"){
document.getElementById(id).style.backgroundColor="#0003ff";
break;    
}else if(type_color_move == "w" && type_color == "b"){
document.getElementById(id).style.backgroundColor="#fff100";
move_positions.push(id);
break;    
}  
}
move_positions.push(id);  document.getElementById(id).style.backgroundColor ="#1e5e00";
    }
    for (let i = x; i <= 8; i++){
       var id = a[i]+b[y]    
if(document.getElementById(id)===document.getElementById(starting_pos)){
       continue 
}else if (document.getElementById(id).innerHTML!==""){ 
var parent = document.getElementById(id). children[0].id
var parent_1 = document.getElementById(id). children[0].parentNode.id
var spl_par = parent.split("_");
var type_color_move = Array.from(spl_par[1]); 
type_color_move.shift();
if(type_color_move =="w" && type_color == "w"){
document.getElementById(id).style.backgroundColor="#0003ff";
break;   
}else if(type_color_move == "b" && type_color == "w"){
document.getElementById(id).style.backgroundColor="#fff100";
move_positions.push(id);
break;  
}  else if(type_color_move =="w" && type_color == "w"){
document.getElementById(id).style.backgroundColor="#0003ff";
break;   
}else if(type_color_move == "b" && type_color == "b"){
document.getElementById(id).style.backgroundColor="#0003ff";
break;    
}else if(type_color_move == "w" && type_color == "b"){
document.getElementById(id).style.backgroundColor="#fff100";
move_positions.push(id);
break;    
}
}
move_positions.push(id); document.getElementById(id).style.backgroundColor ="#1e5e00";
    }  
    for (let i = y; i >= 1; i--){
       var id = a[x]+b[i]  
if(document.getElementById(id)===document.getElementById(starting_pos)){
       continue 
}else if (document.getElementById(id).innerHTML!==""){ 
var parent = document.getElementById(id). children[0].id
var parent_1 = document.getElementById(id). children[0].parentNode.id
var spl_par = parent.split("_");
var type_color_move = Array.from(spl_par[1]); 
type_color_move.shift();
if(type_color_move =="w" && type_color == "w"){
document.getElementById(id).style.backgroundColor="#0003ff";
break;   
}else if(type_color_move == "b" && type_color == "w"){
document.getElementById(id).style.backgroundColor="#fff100";
move_positions.push(id);
break;  
}  else if(type_color_move =="w" && type_color == "w"){
document.getElementById(id).style.backgroundColor="#0003ff";
break;   
}else if(type_color_move == "b" && type_color == "b"){
document.getElementById(id).style.backgroundColor="#0003ff";
break;    
}else if(type_color_move == "w" && type_color == "b"){
document.getElementById(id).style.backgroundColor="#fff100";
move_positions.push(id);
break;    
}   
}
move_positions.push(id); document.getElementById(id).style.backgroundColor ="#1e5e00";
    } 
    for (let i = x; i >= 1; i--){
       var id = a[i]+b[y] 
if(document.getElementById(id)===document.getElementById(starting_pos)){
       continue 
}else if (document.getElementById(id).innerHTML!==""){ 
var parent = document.getElementById(id). children[0].id
var parent_1 = document.getElementById(id). children[0].parentNode.id
var spl_par = parent.split("_");
var type_color_move = Array.from(spl_par[1]); 
type_color_move.shift();
if(type_color_move =="w" && type_color == "w"){
document.getElementById(id).style.backgroundColor="#0003ff";
break;   
}else if(type_color_move == "b" && type_color == "w"){
document.getElementById(id).style.backgroundColor="#fff100";
move_positions.push(id);
break;  
}  else if(type_color_move =="w" && type_color == "w"){
document.getElementById(id).style.backgroundColor="#0003ff";
break;   
}else if(type_color_move == "b" && type_color == "b"){
document.getElementById(id).style.backgroundColor="#0003ff";
break;    
}else if(type_color_move == "w" && type_color == "b"){
document.getElementById(id).style.backgroundColor="#fff100";
move_positions.push(id);
break;    
}  
}
move_positions.push(id); document.getElementById(id).style.backgroundColor ="#1e5e00";
    }       
 while(x <= 8){
     var id = a[x]+b[y]
if (document.getElementById(id) == null){
    break;
}     document.getElementById(id).style.backgroundColor ="#1e5e00";
if(document.getElementById(id)===document.getElementById(starting_pos)){
}else if (document.getElementById(id).innerHTML !==""){ 
var parent = document.getElementById(id). children[0].id
var parent_1 = document.getElementById(id). children[0].parentNode.id
var spl_par = parent.split("_");
var type_color_move = Array.from(spl_par[1]); 
type_color_move.shift();
if(type_color_move == "w" && type_color == "w"){
document.getElementById(id).style.backgroundColor="#0003ff";  
break;
}else if(type_color_move == "b" && type_color == "w"){
document.getElementById(id).style.backgroundColor="#fff100"; 
move_positions.push(id);
break;   
}else if(type_color_move == "b" && type_color == "b"){
document.getElementById(id).style.backgroundColor="#0003ff"; 
break;   
}else if(type_color_move == "w" && type_color == "b"){
document.getElementById(id).style.backgroundColor="#fff100"; 
move_positions.push(id);
break;   
}
}
move_positions.push(id);
     x++;
     y++;
 }
 while(m >= 1){
     var id = a[m]+b[n]
if (document.getElementById(id) == null){
    break;
} 
 document.getElementById(id).style.backgroundColor ="#1e5e00";
if(document.getElementById(id)===document.getElementById(starting_pos)){
}else if (document.getElementById(id).innerHTML !==""){ 
var parent = document.getElementById(id). children[0].id
var parent_1 = document.getElementById(id). children[0].parentNode.id
var spl_par = parent.split("_");
var type_color_move = Array.from(spl_par[1]); 
type_color_move.shift();
if(type_color_move == "w" && type_color == "w"){
document.getElementById(id).style.backgroundColor="#0003ff";  
break;
}else if(type_color_move == "b" && type_color == "w"){
document.getElementById(id).style.backgroundColor="#fff100"; 
move_positions.push(id); 
break;   
}else if(type_color_move == "b" && type_color == "b"){
document.getElementById(id).style.backgroundColor="#0003ff"; 
break;   
}else if(type_color_move == "w" && type_color == "b"){
document.getElementById(id).style.backgroundColor="#fff100"; 
move_positions.push(id); 
break;   
}
}
move_positions.push(id); 
     m--;
     n++;
 }
while(k >= 1){
     var id = a[k]+b[r]
if (document.getElementById(id) == null){
    break;
}  
 document.getElementById(id).style.backgroundColor ="#1e5e00";
if(document.getElementById(id)===document.getElementById(starting_pos)){
}else if (document.getElementById(id).innerHTML !==""){ 
var parent = document.getElementById(id). children[0].id
var parent_1 = document.getElementById(id). children[0].parentNode.id
var spl_par = parent.split("_");
var type_color_move = Array.from(spl_par[1]); 
type_color_move.shift();
if(type_color_move == "w" && type_color == "w"){
document.getElementById(id).style.backgroundColor="#0003ff";  
break;
}else if(type_color_move == "b" && type_color == "w"){
document.getElementById(id).style.backgroundColor="#fff100"; 
move_positions.push(id);
break;   
}else if(type_color_move == "b" && type_color == "b"){
document.getElementById(id).style.backgroundColor="#0003ff"; 
break;   
}else if(type_color_move == "w" && type_color == "b"){
document.getElementById(id).style.backgroundColor="#fff100";
move_positions.push(id); 
break;   
}
}
move_positions.push(id);
     k--;
     r--;
}
while(h <= 8){
     var id = a[h]+b[w]
if (document.getElementById(id) == null){
    break;
}  
 document.getElementById(id).style.backgroundColor ="#1e5e00";
if(document.getElementById(id)===document.getElementById(starting_pos)){
}else if (document.getElementById(id).innerHTML !==""){ 
var parent = document.getElementById(id). children[0].id
var parent_1 = document.getElementById(id). children[0].parentNode.id
var spl_par = parent.split("_");
var type_color_move = Array.from(spl_par[1]); 
type_color_move.shift();
if(type_color_move == "w" && type_color == "w"){
document.getElementById(id).style.backgroundColor="#0003ff";  
break;
}else if(type_color_move == "b" && type_color == "w"){
document.getElementById(id).style.backgroundColor="#fff100"; 
move_positions.push(id);
break;   
}else if(type_color_move == "b" && type_color == "b"){
document.getElementById(id).style.backgroundColor="#0003ff"; 
break;   
}else if(type_color_move == "w" && type_color == "b"){
document.getElementById(id).style.backgroundColor="#fff100";
move_positions.push(id); 
break;   
}
}
move_positions.push(id);
     h++;
     w--;
}
}else if(type == "king"){
const cord_x = [1,-1,-1,0,0,1,1,0];
const cord_y = [1,0,0,-1,-1,0,0,1];
    for(let i = 0; i <= 8; i++){
  x = x+cord_x[i]
  y = y+cord_y[i]
      var id = a[x]+b[y]
if (document.getElementById(id) == null){
    continue;
}
if(type_color == "w"){  
white_illegal_moves(id)
let checked_black_id = true;
}else if(type_color == "b"){
black_illegal_moves(id)
let checked_white_id = true;       
} 
if (document.getElementById(id).innerHTML == ""){
if (type_color == "w"){
let checked_white_id = white_illegal_moves(id) 
if(!checked_white_id){
move_positions.push(id);     document.getElementById(id).style.backgroundColor ="#1e5e00";    
}  
}else if (type_color == "b"){
let checked_black_id = black_illegal_moves(id) 
if(!checked_black_id){
move_positions.push(id);     document.getElementById(id).style.backgroundColor ="#1e5e00";    
}  
}  
}else if (document.getElementById(id).innerHTML!==""){
var parent = document.getElementById(id). children[0].id
var spl_par = parent.split("_");
var type_color_move = Array.from(spl_par[1]); 
type_color_move.shift();
if(type_color_move == "w" && type_color == "w"){
document.getElementById(id).style.backgroundColor="#0003ff"; 
}else if(type_color_move == "b" && type_color == "w" ){
let checked_white_id = white_illegal_moves(id) 
if(!checked_white_id){
document.getElementById(id).style.backgroundColor="#fff100";
move_positions.push(id);
}  
}else if(type_color_move == "b" && type_color == "b"){
document.getElementById(id).style.backgroundColor="#0003ff";  
}else if(type_color_move == "w" && type_color == "b"){
let checked_black_id = black_illegal_moves(id)
if(!checked_black_id){
document.getElementById(id).style.backgroundColor="#fff100";
move_positions.push(id); 
}  
}
}
}
let castle_status = {
e1: true,
f1: true,
g1: true,
d1: true, 
c1: true,
b1: true,  
e8: true,
f8: true,
g8: true,
d8: true, 
c8: true,
b8: true,  
}
let white_castle_squares = ["e1","f1","g1","d1","c1","b1"]
let black_castle_squares = ["e8","f8","g8","d8","c8","b8"]
for(let i = 0; i < white_castle_squares.length; i++){
white_illegal_moves(white_castle_squares[i])
let checked_white_id = white_illegal_moves(white_castle_squares[i]) 
castle_status[white_castle_squares[i]] =  checked_white_id
}
for(let i = 0; i < black_castle_squares.length; i++){
black_illegal_moves(black_castle_squares[i])
let checked_black_id = black_illegal_moves(black_castle_squares[i]) 
castle_status[black_castle_squares[i]] =  checked_black_id
}
for(key in castle_status){
    console.log(key,":",castle_status[key])
}

var f1_square = document.getElementById("f1")
var g1_square = document.getElementById("g1")
var b1_square = document.getElementById("b1")
var c1_square = document.getElementById("c1")
var d1_square = document.getElementById("d1")
var f8_square = document.getElementById("f8")
var g8_square = document.getElementById("g8")
var b8_square = document.getElementById("b8")
var c8_square = document.getElementById("c8")
var d8_square = document.getElementById("d8")

if (f1_square.innerHTML == "" && g1_square.innerHTML == "" && rook_2w == 0 && king_w == 0 && type_color == "w" && document.getElementById("h1").firstElementChild.id == "rook_2w_piece" && !castle_status.e1 && !castle_status.f1 && !castle_status.g1){ 
g1_square.style.backgroundColor = "#95fff5"
move_positions.push("g1")
}
if (f8_square.innerHTML == "" && g8_square.innerHTML == "" && rook_2b == 0 && king_b == 0 && type_color == "b"  && document.getElementById("h8").firstElementChild.id == "rook_2b_piece" && !castle_status.e8 && !castle_status.f8 && !castle_status.g8){ 
g8_square.style.backgroundColor = "#95fff5"
move_positions.push("g8")
}
if (b1_square.innerHTML == "" && c1_square.innerHTML == "" && d1_square.innerHTML == "" && rook_1w == 0 && king_w == 0 && type_color == "w"  && document.getElementById("a1").firstElementChild.id == "rook_1w_piece" && !castle_status.e1 && !castle_status.d1 && !castle_status.c1 && !castle_status.b1){ 
c1_square.style.backgroundColor = "#95fff5"
move_positions.push("c1")
}
if (b8_square.innerHTML == "" && c8_square.innerHTML == "" && d8_square.innerHTML == "" && rook_1b == 0 && king_b == 0 && type_color == "b" && document.getElementById("a8").firstElementChild.id == "rook_1b_piece" && !castle_status.e8 && !castle_status.d8 && !castle_status.c8 && !castle_status.b8){ 
c8_square.style.backgroundColor = "#95fff5"
move_positions.push("c8")
}
}else if(type == "pawn" && type_color == "w"){
    if (y == 2 && type_color == "w"){
if (x !== 8){
if (document.getElementById(a[x+1]+b[y+1]).innerHTML !== ""){
var parent = document.getElementById(a[x+1]+b[y+1]). children[0].id
var spl_par = parent.split("_");
var type_color_move = Array.from(spl_par[1]); 
type_color_move.shift();
if (type_color_move == "b" && type_color =="w" && x == 1){
document.getElementById(a[x+1]+b[y+1]).style.backgroundColor="#fff100";  
move_positions.push(a[x+1]+b[y+1]); 
}     
} 
}
if (x !== 1){
if (document.getElementById(a[x-1]+b[y+1]).innerHTML !== ""){
var parent = document.getElementById(a[x-1]+b[y+1]). children[0].id
var spl_par = parent.split("_");
var type_color_move = Array.from(spl_par[1]); 
type_color_move.shift();
if (type_color_move == "b" && type_color =="w" && x == 8){
document.getElementById(a[x-1]+b[y+1]).style.backgroundColor="#fff100";  
move_positions.push(a[x-1]+b[y+1]); 
}     
} 
}
if (x !== 1 && x !== 8){
if (document.getElementById(a[x-1]+b[y+1]).innerHTML !== ""){
var parent = document.getElementById(a[x-1]+b[y+1]). children[0].id
var spl_par = parent.split("_");
var type_color_move = Array.from(spl_par[1]); 
type_color_move.shift();
if (type_color_move == "b" && type_color =="w"){
document.getElementById(a[x-1]+b[y+1]).style.backgroundColor="#fff100";  
move_positions.push(a[x-1]+b[y+1]); 
}     
} 
if (document.getElementById(a[x+1]+b[y+1]).innerHTML !== ""){
var parent = document.getElementById(a[x+1]+b[y+1]). children[0].id
var spl_par = parent.split("_");
var type_color_move = Array.from(spl_par[1]); 
type_color_move.shift();
if (type_color_move == "b" && type_color =="w"){
document.getElementById(a[x+1]+b[y+1]).style.backgroundColor="#fff100";  
move_positions.push(a[x+1]+b[y+1]); 
}     
} 
}     
      for(let i = 0; i <= 2; i++){
         var id = a[x]+b[y]; 
if(document.getElementById(id)===document.getElementById(starting_pos)){
         y++
         continue 
}else if (document.getElementById(id).innerHTML !==""){ 
var parent = document.getElementById(id). children[0].id
var parent_1 = document.getElementById(id). children[0].parentNode.id
var spl_par = parent.split("_");
var type_color_move = Array.from(spl_par[1]); 
type_color_move.shift();
if (type_color_move == "w" && type_color =="w" || type_color_move == "b" && type_color =="w" || type_color_move == "w" && type_color =="b" || type_color_move == "b" && type_color =="b"){
    break;
}
}
         move_positions.push(id);     document.getElementById(id).style.backgroundColor ="#1e5e00";  
         y++;
}
      }else{
if (x !== 8){
if (document.getElementById(a[x+1]+b[y+1]).innerHTML !== ""){
var parent = document.getElementById(a[x+1]+b[y+1]). children[0].id
var spl_par = parent.split("_");
var type_color_move = Array.from(spl_par[1]); 
type_color_move.shift();
if (type_color_move == "b" && type_color == "w" && x == 1){
document.getElementById(a[x+1]+b[y+1]).style.backgroundColor="#fff100";  
move_positions.push(a[x+1]+b[y+1]); 
}     
} 
}
if (x !== 1){
if (document.getElementById(a[x-1]+b[y+1]).innerHTML !== ""){
var parent = document.getElementById(a[x-1]+b[y+1]). children[0].id
var spl_par = parent.split("_");
var type_color_move = Array.from(spl_par[1]); 
type_color_move.shift();
if (type_color_move == "b" && type_color =="w" && x == 8){
document.getElementById(a[x-1]+b[y+1]).style.backgroundColor="#fff100";  
move_positions.push(a[x-1]+b[y+1]); 
}     
} 
}
if (x !== 1 && x !== 8){
if (document.getElementById(a[x+1]+b[y+1]).innerHTML !== ""){
var parent = document.getElementById(a[x+1]+b[y+1]). children[0].id
var spl_par = parent.split("_");
var type_color_move = Array.from(spl_par[1]); 
type_color_move.shift();
if (type_color_move == "b" && type_color =="w"){
document.getElementById(a[x+1]+b[y+1]).style.backgroundColor="#fff100";  
move_positions.push(a[x+1]+b[y+1]); 
}     
}             
if (document.getElementById(a[x-1]+b[y+1]).innerHTML !== ""){
var parent = document.getElementById(a[x-1]+b[y+1]). children[0].id
var spl_par = parent.split("_");
var type_color_move = Array.from(spl_par[1]); 
type_color_move.shift();
if (type_color_move == "b" && type_color =="w"){
document.getElementById(a[x-1]+b[y+1]).style.backgroundColor="#fff100";  
move_positions.push(a[x-1]+b[y+1]); 
}     
} 
}
    for(let i = 0; i <= 1; i++){
      var id = a[x]+b[y];
      move_positions.push(id);             document.getElementById(id).style.backgroundColor ="#1e5e00"; 
if(document.getElementById(id)===document.getElementById(starting_pos)){
         y++
         continue 
}else if (document.getElementById(id).innerHTML  !==""){ 
var parent = document.getElementById(id). children[0].id
var parent_1 = document.getElementById(id). children[0].parentNode.id
var spl_par = parent.split("_");
var type_color_move = Array.from(spl_par[1]); 
type_color_move.shift();
if (type_color_move == "w" && type_color =="w" || type_color_move == "b" && type_color =="w" || type_color_move == "w" && type_color =="b" || type_color_move == "b" && type_color =="b"){
coloring()
if (x == 8 && document.getElementById(a[x-1]+b[y]).innerHTML !== ""){
var parent = document.getElementById(a[x-1]+b[y]). children[0].id
var parent_1 = document.getElementById(id). children[0].parentNode.id
var spl_par = parent.split("_");
var type_color_move = Array.from(spl_par[1]); 
type_color_move.shift(); 
if (x !== 1 && x == 8 && document.getElementById(a[x-1]+b[y]).innerHTML !== "" && type_color_move == "b"){
document.getElementById(a[x-1]+b[y]).style.backgroundColor="#fff100";    
}}
var z = move_positions.indexOf(a[x]+b[y])
move_positions.splice(z,1)
if (x == 1 && document.getElementById(a[x+1]+b[y]).innerHTML !== ""){
var parent = document.getElementById(a[x+1]+b[y]). children[0].id
var parent_1 = document.getElementById(id). children[0].parentNode.id
var spl_par = parent.split("_");
var type_color_move = Array.from(spl_par[1]); 
type_color_move.shift(); 
if (x !== 8 && x == 1 && document.getElementById(a[x+1]+b[y]).innerHTML !== ""  && type_color_move == "b"){
document.getElementById(a[x+1]+b[y]).style.backgroundColor="#fff100";    
}}
if (x !== 1 && x !== 8){
if (document.getElementById(a[x+1]+b[y]).innerHTML !== ""){
var parent = document.getElementById(a[x+1]+b[y]). children[0].id
var parent_1 = document.getElementById(id). children[0].parentNode.id
var spl_par = parent.split("_");
var type_color_move = Array.from(spl_par[1]); 
type_color_move.shift(); 
if (document.getElementById(a[x+1]+b[y]).innerHTML !== "" && type_color_move == "b"){
document.getElementById(a[x+1]+b[y]).style.backgroundColor="#fff100"; 
}}
if (document.getElementById(a[x-1]+b[y]).innerHTML !== ""){
var parent = document.getElementById(a[x-1]+b[y]). children[0].id
var parent_1 = document.getElementById(id). children[0].parentNode.id
var spl_par = parent.split("_");
var type_color_move = Array.from(spl_par[1]); 
type_color_move.shift(); 
if (document.getElementById(a[x-1]+b[y]).innerHTML !== "" && type_color_move == "b"){
document.getElementById(a[x-1]+b[y]).style.backgroundColor="#fff100";
}}
} 
if (document.getElementById(a[enpassant_x_b]+b[
enpassant_y_b])) {
if (enpassant_y_b == 5 && document.getElementById(a[enpassant_x_b]+b[
enpassant_y_b]).innerHTML !== "" && enpassant_counter_1 == 1 && y == 6){
    document.getElementById(a[enpassant_x_b]+b[
enpassant_y_b+1]).style.backgroundColor = "rgb(0, 255, 255)"
move_positions.push(a[enpassant_x_b]+b[
enpassant_y_b+1])
}}
if (document.getElementById(a[enpassant_x_b+1]+b[
enpassant_y_b])) {
if (enpassant_y_b == 5 && document.getElementById(a[enpassant_x_b+1]+b[
enpassant_y_b]).innerHTML !== "" && enpassant_counter_1 == 1 && y == 6){
    document.getElementById(a[enpassant_x_b]+b[
enpassant_y_b+1]).style.backgroundColor = "rgb(0, 255, 255)"
move_positions.push(a[enpassant_x_b]+b[
enpassant_y_b+1])
}}       
    break;
}
}
move_positions.push(id);
if (document.getElementById(a[enpassant_x_b]+b[
enpassant_y_b])) {
if (enpassant_y_b == 5 && document.getElementById(a[enpassant_x_b]+b[
enpassant_y_b]).innerHTML !== "" && enpassant_counter_1 == 1 && y == 6){
    document.getElementById(a[enpassant_x_b]+b[
enpassant_y_b+1]).style.backgroundColor = "rgb(0, 255, 255)"
move_positions.push(a[enpassant_x_b]+b[
enpassant_y_b+1])
}}
if (document.getElementById(a[enpassant_x_b+1]+b[
enpassant_y_b])) {
if (enpassant_y_b == 5 && document.getElementById(a[enpassant_x_b+1]+b[
enpassant_y_b]).innerHTML !== "" && enpassant_counter_1 == 1 && y == 6){
    document.getElementById(a[enpassant_x_b]+b[
enpassant_y_b+1]).style.backgroundColor = "rgb(0, 255, 255)"
move_positions.push(a[enpassant_x_b]+b[
enpassant_y_b+1])
}}       
}
}
}else if(type == "pawn" && type_color == "b"){
    if(y == 7 && type_color == "b"){
if (x !== 8){
if (document.getElementById(a[x+1]+b[y-1]).innerHTML !== ""){
var parent = document.getElementById(a[x+1]+b[y-1]). children[0].id
var spl_par = parent.split("_");
var type_color_move = Array.from(spl_par[1]); 
type_color_move.shift();
if (type_color_move == "w" && type_color =="b" && x == 1){
document.getElementById(a[x+1]+b[y-1]).style.backgroundColor="#fff100";  
move_positions.push(a[x+1]+b[y-1]); 
}     
} 
}
if (x !== 1){
if (document.getElementById(a[x-1]+b[y-1]).innerHTML !== ""){
var parent = document.getElementById(a[x-1]+b[y-1]). children[0].id
var spl_par = parent.split("_");
var type_color_move = Array.from(spl_par[1]); 
type_color_move.shift();
if (type_color_move == "w" && type_color =="b" && x == 8){
document.getElementById(a[x-1]+b[y-1]).style.backgroundColor="#fff100";  
move_positions.push(a[x-1]+b[y-1]); 
}     
} 
}
if (x !== 1 && x !== 8){
if (document.getElementById(a[x+1]+b[y-1]).innerHTML !== ""){
var parent = document.getElementById(a[x+1]+b[y-1]). children[0].id
var spl_par = parent.split("_");
var type_color_move = Array.from(spl_par[1]); 
type_color_move.shift();
if (type_color_move == "w" && type_color =="b"){
document.getElementById(a[x+1]+b[y-1]).style.backgroundColor="#fff100";
move_positions.push(a[x+1]+b[y-1]); 
}     
} 
if (document.getElementById(a[x-1]+b[y-1]).innerHTML !== ""){
var parent = document.getElementById(a[x-1]+b[y-1]). children[0].id
var spl_par = parent.split("_");
var type_color_move = Array.from(spl_par[1]); 
type_color_move.shift();
if (type_color_move == "w" && type_color =="b"){
document.getElementById(a[x-1]+b[y-1]).style.backgroundColor="#fff100";  
move_positions.push(a[x-1]+b[y-1]); 
}     
} 
}
        for(let i = y; i >= 5; i--){
         var id = a[x]+b[y];
if(document.getElementById(id)===document.getElementById(starting_pos)){
         y--
         continue 
}else if (document.getElementById(id).innerHTML !==""){ 
var parent = document.getElementById(id). children[0].id
var parent_1 = document.getElementById(id). children[0].parentNode.id
var spl_par = parent.split("_");
var type_color_move = Array.from(spl_par[1]); 
type_color_move.shift();
if (type_color_move == "w" && type_color =="w" || type_color_move == "b" && type_color =="w" || type_color_move == "w" && type_color =="b" || type_color_move == "b" && type_color =="b"){
    break;
}
}
         move_positions.push(id);     document.getElementById(id).style.backgroundColor ="#1e5e00";        
        y--;   
    }
    }else{
if (x !== 8){
if (document.getElementById(a[x+1]+b[y-1]).innerHTML !== ""){
var parent = document.getElementById(a[x+1]+b[y-1]). children[0].id
var spl_par = parent.split("_");
var type_color_move = Array.from(spl_par[1]); 
type_color_move.shift();
if (type_color_move == "w" && type_color == "b" && x == 1){
document.getElementById(a[x+1]+b[y-1]).style.backgroundColor="#fff100";  
move_positions.push(a[x+1]+b[y-1]); 
}     
} 
}
if (x !== 1){
if (document.getElementById(a[x-1]+b[y-1]).innerHTML !== ""){
var parent = document.getElementById(a[x-1]+b[y-1]). children[0].id
var spl_par = parent.split("_");
var type_color_move = Array.from(spl_par[1]); 
type_color_move.shift();
if (type_color_move == "w" && type_color =="b" && x == 8){
document.getElementById(a[x-1]+b[y-1]).style.backgroundColor="#fff100";  
move_positions.push(a[x-1]+b[y-1]); 
}     
} 
}
if (x !== 1 && x !== 8){
if (document.getElementById(a[x+1]+b[y-1]).innerHTML !== ""){
var parent = document.getElementById(a[x+1]+b[y-1]). children[0].id
var spl_par = parent.split("_");
var type_color_move = Array.from(spl_par[1]); 
type_color_move.shift();
if (type_color_move == "w" && type_color =="b"){
document.getElementById(a[x+1]+b[y-1]).style.backgroundColor="#fff100";  
move_positions.push(a[x+1]+b[y-1]); 
}     
}             
if (document.getElementById(a[x-1]+b[y-1]).innerHTML !== ""){
var parent = document.getElementById(a[x-1]+b[y-1]). children[0].id
var spl_par = parent.split("_");
var type_color_move = Array.from(spl_par[1]); 
type_color_move.shift();
if (type_color_move == "w" && type_color =="b"){
document.getElementById(a[x-1]+b[y-1]).style.backgroundColor="#fff100";  
move_positions.push(a[x-1]+b[y-1]); 
}     
} 
}
    for(let i = 0; i <= 1; i++){
      var id = a[x]+b[y];
      move_positions.push(id);             document.getElementById(id).style.backgroundColor ="#1e5e00"; 
if(document.getElementById(id)===document.getElementById(starting_pos)){
         y--
         continue 
}else if (document.getElementById(id).innerHTML  !==""){ 
var parent = document.getElementById(id). children[0].id
var parent_1 = document.getElementById(id). children[0].parentNode.id
var spl_par = parent.split("_");
var type_color_move = Array.from(spl_par[1]); 
type_color_move.shift();
if (type_color_move == "w" && type_color =="w" || type_color_move == "b" && type_color =="w" || type_color_move == "w" && type_color =="b" || type_color_move == "b" && type_color =="b"){
coloring()
if (x == 8 && document.getElementById(a[x-1]+b[y]).innerHTML !== ""){
var parent = document.getElementById(a[x-1]+b[y]). children[0].id
var parent_1 = document.getElementById(id). children[0].parentNode.id
var spl_par = parent.split("_");
var type_color_move = Array.from(spl_par[1]); 
type_color_move.shift(); 
if (x !== 1 && x == 8 && document.getElementById(a[x-1]+b[y]).innerHTML !== "" && type_color_move == "w"){
document.getElementById(a[x-1]+b[y]).style.backgroundColor="#fff100";    
}}
var z = move_positions.indexOf(a[x]+b[y])
move_positions.splice(z,1)
if (x == 1 && document.getElementById(a[x+1]+b[y]).innerHTML !== ""){
var parent = document.getElementById(a[x+1]+b[y]). children[0].id
var parent_1 = document.getElementById(id). children[0].parentNode.id
var spl_par = parent.split("_");
var type_color_move = Array.from(spl_par[1]); 
type_color_move.shift(); 
if (x !== 8 && x == 1 && document.getElementById(a[x+1]+b[y]).innerHTML !== ""  && type_color_move == "w"){
document.getElementById(a[x+1]+b[y]).style.backgroundColor="#fff100";    
}}
if (x !== 1 && x !== 8){
if (document.getElementById(a[x+1]+b[y]).innerHTML !== ""){
var parent = document.getElementById(a[x+1]+b[y]). children[0].id
var parent_1 = document.getElementById(id). children[0].parentNode.id
var spl_par = parent.split("_");
var type_color_move = Array.from(spl_par[1]); 
type_color_move.shift(); 
if (document.getElementById(a[x+1]+b[y]).innerHTML !== "" && type_color_move == "w"){
document.getElementById(a[x+1]+b[y]).style.backgroundColor="#fff100"; 
}}
if (document.getElementById(a[x-1]+b[y]).innerHTML !== ""){
var parent = document.getElementById(a[x-1]+b[y]). children[0].id
var parent_1 = document.getElementById(id). children[0].parentNode.id
var spl_par = parent.split("_");
var type_color_move = Array.from(spl_par[1]); 
type_color_move.shift(); 
if (document.getElementById(a[x-1]+b[y]).innerHTML !== "" && type_color_move == "w"){
document.getElementById(a[x-1]+b[y]).style.backgroundColor="#fff100";
}}
} 
if (document.getElementById(a[enpassant_x_w-1]+b[
enpassant_y_w])) {
if (enpassant_y_w == 4 && document.getElementById(a[enpassant_x_w-1]+b[
enpassant_y_w]).innerHTML !== "" && enpassant_counter == 1 && y == 3){
    document.getElementById(a[enpassant_x_w]+b[
enpassant_y_w-1]).style.backgroundColor = "rgb(0, 255, 255)"
move_positions.push(a[enpassant_x_w]+b[
enpassant_y_w-1])
}}
if (document.getElementById(a[enpassant_x_w+1]+b[
enpassant_y_w])) {
if (enpassant_y_w == 4 && document.getElementById(a[enpassant_x_w+1]+b[
enpassant_y_w]).innerHTML !== "" && enpassant_counter == 1 && y == 3){
   document.getElementById(a[enpassant_x_w]+b[
enpassant_y_w-1]).style.backgroundColor = "rgb(0, 255, 255)"
move_positions.push(a[enpassant_x_w]+b[
enpassant_y_w-1])
}}
    break;
}
}
move_positions.push(id);
if (document.getElementById(a[enpassant_x_w-1]+b[
enpassant_y_w])) {
if (enpassant_y_w == 4 && document.getElementById(a[enpassant_x_w-1]+b[
enpassant_y_w]).innerHTML !== "" && enpassant_counter == 1 && y == 3){
    document.getElementById(a[enpassant_x_w]+b[
enpassant_y_w-1]).style.backgroundColor = "rgb(0, 255, 255)"
move_positions.push(a[enpassant_x_w]+b[
enpassant_y_w-1])
}}
if (document.getElementById(a[enpassant_x_w+1]+b[
enpassant_y_w])) {
if (enpassant_y_w == 4 && document.getElementById(a[enpassant_x_w+1]+b[
enpassant_y_w]).innerHTML !== "" && enpassant_counter == 1 && y == 3){
    document.getElementById(a[enpassant_x_w]+b[
enpassant_y_w-1]).style.backgroundColor = "rgb(0, 255, 255)"
move_positions.push(a[enpassant_x_w]+b[
enpassant_y_w-1])
}}       
}
}
}
document.getElementById(starting_pos).style.backgroundColor="#4aec00";
var i = move_positions.length-1;
while (i >= 0){
if(starting_pos == move_positions[i]){
move_positions.splice(i,1)      
}
i--;
}
move_positions.forEach(function(element) {    document.getElementById(element).addEventListener("click",move_done,{signal})
});
if (multiple_choices == 2){
controller.abort();
coloring();
if (check_status.white){ 
var white_king_square_id = document.getElementById("king_#w_piece").parentNode.id  
document.getElementById(white_king_square_id).style.backgroundColor = "#ff000a"
}
if (check_status.black){  
var black_king_square_id = document.getElementById("king_pb_piece").parentNode.id
document.getElementById(black_king_square_id).style.backgroundColor = "#ff000a"
}
multiple_choices = 0;
controller = new AbortController();
signal = controller.signal;
}
console.log("move_positions:",move_positions)
function move_done(e){
if (starting_pos == "a1"){
rook_1w++;   
}else if (starting_pos == "h1"){
rook_2w++;
}else if (starting_pos == "e1"){ 
king_w++;
} else if (starting_pos == "a8"){
rook_1b++;    
}else if (starting_pos == "h8"){
rook_2b++;
}else if (starting_pos == "e8"){
king_b++;
}
if (document.getElementById(e.target.id).style.backgroundColor == "rgb(149, 255, 245)" && document.getElementById(e.target.id).id == "g1"){
var oldParent = document.getElementById("h1");
    var newParent = document.getElementById("f1");
while (oldParent.childNodes.length > 0){newParent.appendChild(oldParent.childNodes[0]);
}  
}else if (document.getElementById(e.target.id).style.backgroundColor == "rgb(149, 255, 245)" && document.getElementById(e.target.id).id == "c1"){
var oldParent = document.getElementById("a1");
    var newParent = document.getElementById("d1");
while (oldParent.childNodes.length > 0){newParent.appendChild(oldParent.childNodes[0]);
}
}  else if (document.getElementById(e.target.id).style.backgroundColor == "rgb(149, 255, 245)" && document.getElementById(e.target.id).id == "g8"){
var oldParent = document.getElementById("h8");
    var newParent = document.getElementById("f8");
while (oldParent.childNodes.length > 0){newParent.appendChild(oldParent.childNodes[0]);
}  
}else if (document.getElementById(e.target.id).style.backgroundColor == "rgb(149, 255, 245)" && document.getElementById(e.target.id).id == "c8"){
var oldParent = document.getElementById("a8");
    var newParent = document.getElementById("d8");
while (oldParent.childNodes.length > 0){newParent.appendChild(oldParent.childNodes[0]);
}
}  
multiple_choices = 0;
var start = document.getElementById(starting_pos).className
var c = Array.from(start)
var cors_start_x = c[0]
var cors_start_y = c[1]
var cors = Array.from(e.target.className)
var cor_x = cors[0]
var cor_y = cors[1]
if (type == "pawn" && cors_start_y == 2 && cor_y == 4){  
enpassant_x_w = parseInt(cor_x);
enpassant_y_w = parseInt(cor_y);
ep = true;
}
if (type == "pawn" && cors_start_y == 7 && cor_y == 5){  
enpassant_x_b = parseInt(cor_x);
enpassant_y_b = parseInt(cor_y); 
ep_1 = true;
}
if (ep){
    enpassant_counter++;
}
if (ep_1){
    enpassant_counter_1++;
}
if (document.getElementById("turn").innerText ==  "Black's Turn" && enpassant_counter == 2){
enpassant_counter = 0;
ep = false;  
}
if (document.getElementById("turn").innerText ==  "White's Turn" && enpassant_counter_1 == 2){
enpassant_counter_1 = 0;
ep_1 = false;  
}
if (document.getElementById(e.target.id).style.backgroundColor== "rgb(0, 255, 255)" && type_color == "b"){
var par = document.getElementById(e.target.id).className
var c = Array.from(par)
corx = parseInt(c[0])
cory = parseInt(c[1])
let capture_id =  a[corx]+b[cory+1];
var parent = document.getElementById(capture_id)
parent.removeChild(parent.firstChild)
}
if (document.getElementById(e.target.id).style.backgroundColor== "rgb(0, 255, 255)" && type_color == "w"){
var par = document.getElementById(e.target.id).className
var c = Array.from(par)
corx = parseInt(c[0])
cory = parseInt(c[1])
let capture_id =  a[corx]+b[cory-1];
var parent = document.getElementById(capture_id)
parent.removeChild(parent.firstChild)
}
if (document.getElementById(this.id).style.backgroundColor== "rgb(74, 236, 0)" || document.getElementById(this.id).style.backgroundColor== "rgb(255, 241, 0)"){ 
var parent = document.getElementById(this.id)
var child = document.getElementById(e.target.id)
parent.removeChild(parent.firstChild)
var oldParent = document.getElementById(starting_pos);
    var newParent = document.getElementById(this.id);
while (oldParent.childNodes.length > 0){newParent.appendChild(oldParent.childNodes[0]);
}
}
var oldParent = document.getElementById(starting_pos);
    var newParent = document.getElementById(e.target.id)
while (oldParent.childNodes.length > 0){newParent.appendChild(oldParent.childNodes[0]);
}
if (type == "pawn" && type_color == "w" && y == 8){
document.getElementById("promotion").style.display = "block" 
prom.push(this.id)
prom.push(type_color)
}else if (type == "pawn" && type_color == "b" && y == 1){
document.getElementById("promotion").style.display = "block" 
prom.push(this.id)
prom.push(type_color)   
}
if(document.getElementById("turn").innerText == "White's Turn"){
 document.getElementById("turn").innerText =  "Black's Turn" 
}else{
document.getElementById("turn").innerText =  "White's Turn"    
}
coloring()
for (var i = 0; i <  move_positions.length; i++){
var position =  document.getElementById(move_positions[i]).removeEventListener('click',move_done)}
check_status = {
white: false,
black: false,
pieces_counter_check: 0  
}
white_check()
black_check()
}
}
</script>
<style>
body{
        background-color:#ff8800;
    }
#box {
    height: 640px;
    margin: 20px;
}
#turn{display:flex;
     align-items: center;
    justify-content:center;}
nav {
    background-color:#ff8800;
    color: rgb(255, 255, 255);
    display: flex;
    align-items: center;
    justify-content: center;
   }
}

.fa-chess-queen{
font-size:1.7em;}

.fa-chess-rook{
font-size:1.7em;}

.fa-chess-knight{
font-size:1.7em;}

.fa-chess-bishop{
font-size:1.7em;}

.fa-chess-king{
font-size:1.7em;}

.fa-chess-queen{
font-size:1.7em;}

.fa-chess-pawn{
font-size:1.7em;}

#a1,#a2,#a3,#a4,#a5,#a6,#a7,#a8,
#b1,#b2,#b3,#b4,#b5,#b6,#b7,#b8,
#c1,#c2,#c3,#c4,#c5,#c6,#c7,#c8,
#d1,#d2,#d3,#d4,#d5,#d6,#d7,#d8,
#e1,#e2,#e3,#e4,#e5,#e6,#e7,#e8,
#f1,#f2,#f3,#f4,#f5,#f6,#f7,#f8,
#g1,#g2,#g3,#g4,#g5,#g6,#g7,#g8,
#h1,#h2,#h3,#h4,#h5,#h6,#h7,#h8{
    border: solid black 1px;
    width: 40px;
    height: 40px;
    text-align:center;
    display: table-cell;
    vertical-align:middle;
}
#rook_1b_piece,#rook_2b_piece,#knight_1b_piece,#knight_2b_piece,#bishop_1b_piece,#bishop_2b_piece,
#king_pb_piece,#queen_1b_piece,#pawn_1b_piece,#pawn_2b_piece,#pawn_3b_piece,#pawn_4b_piece,#pawn_5b_piece,#pawn_6b_piece,#pawn_7b_piece,#pawn_8b_piece{color:black;}

.promote {
  display: none;
  position: absolute;
  z-index: 1;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  overflow: auto;
  background-color: rgba(0, 0, 0, 0.4);
}

.promote-content {
  border-radius: 5px;
  background-color: #fefefe;
  margin: 15% auto;
  padding: 20px;
  border: 1px solid #888;
  width: 300px;
  text-align: center;
}

.promote_1 {
  display: none;
  position: absolute;
  z-index: 1;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  overflow: auto;
  background-color: rgba(0, 0, 0, 0.4);
}

.promote-content_1 {
  border-radius: 5px;
  background-color: #fefefe;
  margin: 15% auto;
  padding: 20px;
  border: 1px solid #888;
  width: 300px;
  text-align: center;
}

#rook,#knight,#bishop,#queen{
  color:black;
  margin: 5px;
  font-size:2.1em;
}
#rook_1,#knight_1,#bishop_1,#queen_1{
  color:black;
  margin: 5px;
  font-size:2.1em;
}
p{
color:black;   
}
#cor_h1{
  position: absolute;
  bottom: 0px;
  left: 327px;
  transform: translateX(-50%);
  font-size: 1em;
  color: rgb(100, 75, 43);
}

#cor_g1{
  position: absolute;
  bottom: 3px;
  left: 285px;
  transform: translateX(-50%);
  font-size: 1em;
  color: rgb(240, 201, 150);
}

#cor_f1{
  position: absolute;
  bottom: 0px;
  left: 243px;
  transform: translateX(-50%);
  font-size: 1em;
  color: rgb(100, 75, 43);
}

#cor_e1{
  position: absolute;
  bottom: 0px;
  left: 201px;
  transform: translateX(-50%);
  font-size: 1em;
  color: rgb(240, 201, 150);
}

#cor_d1{
  position: absolute;
  bottom: 0px;
  left: 159px;
  transform: translateX(-50%);
  font-size: 1em;
  color: rgb(100, 75, 43);
}

#cor_c1{
  position: absolute;
  bottom: 0px;
  left: 117px;
  transform: translateX(-50%);
  font-size: 1em;
  color: rgb(240, 201, 150);
}

#cor_b1{
  position: absolute;
  bottom: 0px;
  left: 75px;
  transform: translateX(-50%);
  font-size: 1em;
  color: rgb(100, 75, 43);
}

#cor_a1{
  position: absolute;
  bottom: 0px;
  left: 36px;
  transform: translateX(-50%);
  font-size: 1em;
  color: rgb(240, 201, 150);
}

#cor_1{
  position: absolute;
  bottom: 20px;
  left: 5px;
  transform: translateX(-50%);
  font-size: 1em;
  color: rgb(240, 201, 150);
}

#cor_2 {
  position: absolute;
  bottom: 20px;
  left: 5px;
  transform: translateX(-50%);
  font-size: 1em;
  color: rgb(100, 75, 43);
}

#cor_3 {
  position: absolute;
  bottom: 20px;
  left: 5px;
  transform: translateX(-50%);
  font-size: 1em;
  color: rgb(240, 201, 150);
}

#cor_4 {
  position: absolute;
  bottom: 20px;
  left: 5px;
  transform: translateX(-50%);
  font-size: 1em;
  color: rgb(100, 75, 43);
}

#cor_5{
  position: absolute;
  bottom: 20px;
  left: 5px;
  transform: translateX(-50%);
  font-size: 1em;
  color: rgb(240, 201, 150);
}

#cor_6{
  position: absolute;
  bottom: 20px;
  left: 5px;
  transform: translateX(-50%);
  font-size: 1em;
  color: rgb(100, 75, 43);
}

#cor_7{
  position: absolute;
  bottom: 20px;
  left: 5px;
  transform: translateX(-50%);
  font-size: 1em;
  color: rgb(240, 201, 150);
}

#cor_8{
  position: absolute;
  bottom: 20px;
  left: 5px;
  transform: translateX(-50%);
  font-size: 1em;
  color: rgb(100, 75, 43);
}

#row1,#row2,#row3,#row4,#row5,#row6,#row7,#row8,#cor_letters{
 position: relative;   
}

@media only screen and (min-width: 650px) {
    body{
        font-size: 2em;
    }
   #a1,#a2,#a3,#a4,#a5,#a6,#a7,#a8,
#b1,#b2,#b3,#b4,#b5,#b6,#b7,#b8,
#c1,#c2,#c3,#c4,#c5,#c6,#c7,#c8,
#d1,#d2,#d3,#d4,#d5,#d6,#d7,#d8,
#e1,#e2,#e3,#e4,#e5,#e6,#e7,#e8,
#f1,#f2,#f3,#f4,#f5,#f6,#f7,#f8,
#g1,#g2,#g3,#g4,#g5,#g6,#g7,#g8,
#h1,#h2,#h3,#h4,#h5,#h6,#h7,#h8{
    width: 70px;
    height: 70px;  
} 
.promote-content{
    width: 560px;
}
.promote-content_1{
    width: 560px;
}
#cor_h1{
  position: relative;
  bottom: 35px;
  left: 477px;
  transform: translateX(-50%);
  font-size: 0.8em;
  color: rgb(100, 75, 43);
}

#cor_g1{
  position: relative;
  bottom: 35px;
  left: 417px;
  transform: translateX(-50%);
  font-size: 0.8em;
  color: rgb(240, 201, 150);
}

#cor_f1{
  position: relative;
  bottom: 35px;
  left: 357px;
  transform: translateX(-50%);
  font-size: 0.8em;
  color: rgb(100, 75, 43);
}

#cor_e1{
  position: relative;
  bottom: 35px;
  left: 297px;
  transform: translateX(-50%);
  font-size: 0.8em;
  color: rgb(240, 201, 150);
}

#cor_d1{
  position: relative;
  bottom: 35px;
  left: 237px;
  transform: translateX(-50%);
  font-size: 0.8em;
  color: rgb(100, 75, 43);
}

#cor_c1{
  position: relative;
  bottom: 35px;
  left: 177px;
  transform: translateX(-50%);
  font-size: 0.8em;
  color: rgb(240, 201, 150);
}

#cor_b1{
  position: relative;
  bottom: 35px;
  left: 117px;
  transform: translateX(-50%);
  font-size: 0.8em;
  color: rgb(100, 75, 43);
}

#cor_a1{
  position: relative;
  bottom: 35px;
  left: 57px;
  transform: translateX(-50%);
  font-size:0.8em;
  color: rgb(240, 201, 150);
}

#cor_1{
  position: absolute;
  bottom: 40px;
  left: 10px;
  transform: translateX(-50%);
  font-size: 0.8em;
  color: rgb(240, 201, 150);
}

#cor_2 {
  position: absolute;
  bottom: 40px;
  left: 10px;
  transform: translateX(-50%);
  font-size: 0.8em;
  color: rgb(100, 75, 43);
}

#cor_3 {
  position: absolute;
  bottom: 40px;
  left: 10px;
  transform: translateX(-50%);
  font-size: 0.8em;
  color: rgb(240, 201, 150);
}

#cor_4 {
  position: absolute;
  bottom: 40px;
  left: 10px;
  transform: translateX(-50%);
  font-size: 0.8em;
  color: rgb(100, 75, 43);
}

#cor_5{
  position: absolute;
  bottom: 40px;
  left: 10px;
  transform: translateX(-50%);
  font-size: 0.8em;
  color: rgb(240, 201, 150);
}

#cor_6{
  position: absolute;
  bottom: 40px;
  left: 10px;
  transform: translateX(-50%);
  font-size: 0.8em;
  color: rgb(100, 75, 43);
}

#cor_7{
  position: absolute;
  bottom: 40px;
  left: 10px;
  transform: translateX(-50%);
  font-size: 0.8em;
  color: rgb(240, 201, 150);
}

#cor_8{
  position: absolute;
  bottom: 40px;
  left: 10px;
  transform: translateX(-50%);
  font-size: 0.8em;
  color: rgb(100, 75, 43);
}
#row1,#row2,#row3,#row4,#row5,#row6,#row7,#row8{
 position: relative;   
}
}

@media only screen and (max-width: 393px) {
    body{
        font-size: 0.6em;
    }
   #a1,#a2,#a3,#a4,#a5,#a6,#a7,#a8,
#b1,#b2,#b3,#b4,#b5,#b6,#b7,#b8,
#c1,#c2,#c3,#c4,#c5,#c6,#c7,#c8,
#d1,#d2,#d3,#d4,#d5,#d6,#d7,#d8,
#e1,#e2,#e3,#e4,#e5,#e6,#e7,#e8,
#f1,#f2,#f3,#f4,#f5,#f6,#f7,#f8,
#g1,#g2,#g3,#g4,#g5,#g6,#g7,#g8,
#h1,#h2,#h3,#h4,#h5,#h6,#h7,#h8{
    width: 25px;
    height: 25px;  
} 
.promote-content{
    width: 160px;
}
.promote-content_1{
    width: 160px;
}
#cor_h1{
  position: relative;
  bottom: 13px;
  left: 176px;
  transform: translateX(-50%);
  font-size: 1em;
  color: rgb(100, 75, 43);
}

#cor_g1{
  position: relative;
  bottom: 15px;
  left: 154px;
  transform: translateX(-50%);
  font-size: 1em;
  color: rgb(240, 201, 150);
}

#cor_f1{
  position: relative;
  bottom: 13px;
  left: 131px;
  transform: translateX(-50%);
  font-size: 1em;
  color: rgb(100, 75, 43);
}

#cor_e1{
  position: relative;
  bottom: 13px;
  left: 109px;
  transform: translateX(-50%);
  font-size: 1em;
  color: rgb(240, 201, 150);
}

#cor_d1{
  position: relative;
  bottom: 13px;
  left: 87px;
  transform: translateX(-50%);
  font-size: 1em;
  color: rgb(100, 75, 43);
}

#cor_c1{
  position: relative;
  bottom: 13px;
  left: 65px;
  transform: translateX(-50%);
  font-size: 1em;
  color: rgb(240, 201, 150);
}

#cor_b1{
  position: relative;
  bottom: 13px;
  left: 43px;
  transform: translateX(-50%);
  font-size: 1em;
  color: rgb(100, 75, 43);
}

#cor_a1{
  position: relative;
  bottom: 13px;
  left: 21px;
  transform: translateX(-50%);
  font-size:1em;
  color: rgb(240, 201, 150);
}

#cor_1{
  position: absolute;
  bottom: 15px;
  left: 5px;
  transform: translateX(-50%);
  font-size: 1em;
  color: rgb(240, 201, 150);
}

#cor_2 {
  position: absolute;
  bottom: 15px;
  left: 5px;
  transform: translateX(-50%);
  font-size: 1em;
  color: rgb(100, 75, 43);
}

#cor_3 {
  position: absolute;
  bottom: 15px;
  left: 5px;
  transform: translateX(-50%);
  font-size: 1em;
  color: rgb(240, 201, 150);
}

#cor_4 {
  position: absolute;
  bottom: 15px;
  left: 5px;
  transform: translateX(-50%);
  font-size: 1em;
  color: rgb(100, 75, 43);
}

#cor_5{
  position: absolute;
  bottom: 15px;
  left: 5px;
  transform: translateX(-50%);
  font-size: 1em;
  color: rgb(240, 201, 150);
}

#cor_6{
  position: absolute;
  bottom: 15px;
  left: 5px;
  transform: translateX(-50%);
  font-size: 1em;
  color: rgb(100, 75, 43);
}

#cor_7{
  position: absolute;
  bottom: 15px;
  left: 5px;
  transform: translateX(-50%);
  font-size: 1em;
  color: rgb(240, 201, 150);
}

#cor_8{
  position: absolute;
  bottom: 15px;
  left: 5px;
  transform: translateX(-50%);
  font-size: 1em;
  color: rgb(100, 75, 43);
}
#row1,#row2,#row3,#row4,#row5,#row6,#row7,#row8{
 position: relative;   
}
}
</style>
<body>
</html>
